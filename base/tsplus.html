<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/imgs/favicon.ico"><title>TypeScript+ | Jason的前端笔记</title><meta name="description" content="全栈工程师成长记录">
    <link rel="modulepreload" href="/WebNotebook/assets/app.a696b835.js"><link rel="modulepreload" href="/WebNotebook/assets/tsplus.html.7e2c646e.js"><link rel="modulepreload" href="/WebNotebook/assets/tsplus.html.eed3e11b.js"><link rel="prefetch" href="/WebNotebook/assets/index.html.0dfa6503.js"><link rel="prefetch" href="/WebNotebook/assets/css.html.5e071627.js"><link rel="prefetch" href="/WebNotebook/assets/html.html.b0837913.js"><link rel="prefetch" href="/WebNotebook/assets/js.html.7d413f4e.js"><link rel="prefetch" href="/WebNotebook/assets/ts.html.4c5868f3.js"><link rel="prefetch" href="/WebNotebook/assets/index.html.e6dfb4a7.js"><link rel="prefetch" href="/WebNotebook/assets/ajax.html.3a9c28f6.js"><link rel="prefetch" href="/WebNotebook/assets/axios.html.b17231bb.js"><link rel="prefetch" href="/WebNotebook/assets/git.html.2e4cf940.js"><link rel="prefetch" href="/WebNotebook/assets/mongodb.html.27b6dc1f.js"><link rel="prefetch" href="/WebNotebook/assets/nodejs.html.93569260.js"><link rel="prefetch" href="/WebNotebook/assets/webpack.html.ad4d557e.js"><link rel="prefetch" href="/WebNotebook/assets/vue2.html.c8988b10.js"><link rel="prefetch" href="/WebNotebook/assets/vue3.html.5733ae73.js"><link rel="prefetch" href="/WebNotebook/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/WebNotebook/assets/index.html.ce113d46.js"><link rel="prefetch" href="/WebNotebook/assets/css.html.f5e9f701.js"><link rel="prefetch" href="/WebNotebook/assets/html.html.85f0cdcd.js"><link rel="prefetch" href="/WebNotebook/assets/js.html.1d64cb3a.js"><link rel="prefetch" href="/WebNotebook/assets/ts.html.9672c300.js"><link rel="prefetch" href="/WebNotebook/assets/index.html.af744433.js"><link rel="prefetch" href="/WebNotebook/assets/ajax.html.31564145.js"><link rel="prefetch" href="/WebNotebook/assets/axios.html.4e96b5e7.js"><link rel="prefetch" href="/WebNotebook/assets/git.html.b022183f.js"><link rel="prefetch" href="/WebNotebook/assets/mongodb.html.4c0b6536.js"><link rel="prefetch" href="/WebNotebook/assets/nodejs.html.c6372b0a.js"><link rel="prefetch" href="/WebNotebook/assets/webpack.html.1b12bad9.js"><link rel="prefetch" href="/WebNotebook/assets/vue2.html.ce183888.js"><link rel="prefetch" href="/WebNotebook/assets/vue3.html.90369fb3.js"><link rel="prefetch" href="/WebNotebook/assets/404.html.9d06ec28.js"><link rel="prefetch" href="/WebNotebook/assets/404.a8bab9bc.js"><link rel="prefetch" href="/WebNotebook/assets/Layout.300f0ece.js">
    <link rel="stylesheet" href="/WebNotebook/assets/style.46da2986.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/WebNotebook/" class=""><img class="logo" src="/WebNotebook/imgs/cosmos.png" alt="Jason的前端笔记"><span class="site-name can-hide">Jason的前端笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/WebNotebook/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Base"><span class="title">Base</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Base"><span class="title">Base</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/WebNotebook/base/html" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/css" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/js" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/ts" class="router-link-active" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/tsplus" class="router-link-active" aria-label="TypeScript+"><!--[--><!--]--> TypeScript+ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Server"><span class="title">Server</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Server"><span class="title">Server</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础通讯</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/ajax" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/axios" class="" aria-label="Axios"><!--[--><!--]--> Axios <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>后端开发</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/nodejs" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/mongodb" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>项目打包</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/webpack" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/WebNotebook/vue/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/vue/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/WebNotebook/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/jrothschild33/WebNotebook" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/WebNotebook/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Base"><span class="title">Base</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Base"><span class="title">Base</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/WebNotebook/base/html" class="" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/css" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/js" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/ts" class="router-link-active" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/base/tsplus" class="router-link-active" aria-label="TypeScript+"><!--[--><!--]--> TypeScript+ <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Server"><span class="title">Server</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Server"><span class="title">Server</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础通讯</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/git" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/ajax" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/axios" class="" aria-label="Axios"><!--[--><!--]--> Axios <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>后端开发</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/nodejs" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/mongodb" class="" aria-label="MongoDB"><!--[--><!--]--> MongoDB <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>项目打包</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/WebNotebook/server/webpack" class="" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/WebNotebook/vue/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/WebNotebook/vue/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/WebNotebook/react/" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/jrothschild33/WebNotebook" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Web Basic <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/WebNotebook/base/html.html" class="sidebar-item" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a><!----></li><li><a href="/WebNotebook/base/css.html" class="sidebar-item" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a><!----></li><li><a href="/WebNotebook/base/js.html" class="sidebar-item" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a><!----></li><li><a href="/WebNotebook/base/ts.html" class="sidebar-item" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="TypeScript+"><!--[--><!--]--> TypeScript+ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#第1章-typescript配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1章 TypeScript配置"><!--[--><!--]--> 第1章 TypeScript配置 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-1-tsc编译器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 TSC编译器"><!--[--><!--]--> 1.1 TSC编译器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-tsconfig-json" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 tsconfig.json"><!--[--><!--]--> 1.2 tsconfig.json <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-0-顶层选项" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.0 顶层选项"><!--[--><!--]--> 1.2.0 顶层选项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-1-项目配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.1 项目配置"><!--[--><!--]--> 1.2.1 项目配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-2-语言和环境" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.2 语言和环境"><!--[--><!--]--> 1.2.2 语言和环境 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-3-模块化" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.3 模块化"><!--[--><!--]--> 1.2.3 模块化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-4-js支持" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.4 JS支持"><!--[--><!--]--> 1.2.4 JS支持 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-5-编译文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.5 编译文件"><!--[--><!--]--> 1.2.5 编译文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-6-相互约束" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.6 相互约束"><!--[--><!--]--> 1.2.6 相互约束 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-7-类型检查" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.7 类型检查"><!--[--><!--]--> 1.2.7 类型检查 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_1-2-8-完整性" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.8 完整性"><!--[--><!--]--> 1.2.8 完整性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#第2章-常用类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2章 常用类型"><!--[--><!--]--> 第2章 常用类型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-1-基元类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 基元类型"><!--[--><!--]--> 2.1 基元类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-2-数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 数组"><!--[--><!--]--> 2.2 数组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-3-any" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 any"><!--[--><!--]--> 2.3 any <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-4-类型注释" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.4 类型注释"><!--[--><!--]--> 2.4 类型注释 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-5-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.5 函数"><!--[--><!--]--> 2.5 函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-6-对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.6 对象"><!--[--><!--]--> 2.6 对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-7-联合类型-union" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.7 联合类型 union"><!--[--><!--]--> 2.7 联合类型 union <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-8-类型别名-type" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.8 类型别名 type"><!--[--><!--]--> 2.8 类型别名 type <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-9-接口-interface" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.9 接口 interface"><!--[--><!--]--> 2.9 接口 interface <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-10-类型断言-as" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.10 类型断言 as"><!--[--><!--]--> 2.10 类型断言 as <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-11-文字类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.11 文字类型"><!--[--><!--]--> 2.11 文字类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-12-null-undefined" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.12 null/undefined"><!--[--><!--]--> 2.12 null/undefined <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-枚举-enum" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13 枚举 enum"><!--[--><!--]--> 2.13 枚举 enum <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-1-数值型枚举" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.1 数值型枚举"><!--[--><!--]--> 2.13.1 数值型枚举 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-2-字符串枚举" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.2 字符串枚举"><!--[--><!--]--> 2.13.2 字符串枚举 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-3-异构枚举" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.3 异构枚举"><!--[--><!--]--> 2.13.3 异构枚举 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-4-计算型和常量型成员" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.4 计算型和常量型成员"><!--[--><!--]--> 2.13.4 计算型和常量型成员 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-5-联合枚举和枚举成员类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.5 联合枚举和枚举成员类型"><!--[--><!--]--> 2.13.5 联合枚举和枚举成员类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-6-运行时的枚举" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.6 运行时的枚举"><!--[--><!--]--> 2.13.6 运行时的枚举 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-7-编译时的枚举" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.7 编译时的枚举"><!--[--><!--]--> 2.13.7 编译时的枚举 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-8-环境枚举-declear" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.8 环境枚举 declear"><!--[--><!--]--> 2.13.8 环境枚举 declear <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-13-9-对象与枚举" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.13.9 对象与枚举"><!--[--><!--]--> 2.13.9 对象与枚举 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-14-其他类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.14 其他类型"><!--[--><!--]--> 2.14 其他类型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-14-1-bignit" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.14.1 bignit"><!--[--><!--]--> 2.14.1 bignit <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_2-14-2-symbol" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.14.2 symbol"><!--[--><!--]--> 2.14.2 symbol <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#第3章-类型缩小" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3章 类型缩小"><!--[--><!--]--> 第3章 类型缩小 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-1-typeof类型守卫" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 typeof类型守卫"><!--[--><!--]--> 3.1 typeof类型守卫 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-2-真值缩小" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 真值缩小"><!--[--><!--]--> 3.2 真值缩小 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-3-等值缩小" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 等值缩小"><!--[--><!--]--> 3.3 等值缩小 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-4-in操作符缩小" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 in操作符缩小"><!--[--><!--]--> 3.4 in操作符缩小 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-5-instanceof操作符缩小" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5 instanceof操作符缩小"><!--[--><!--]--> 3.5 instanceof操作符缩小 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-6-分配缩小" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.6 分配缩小"><!--[--><!--]--> 3.6 分配缩小 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-7-控制流分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.7 控制流分析"><!--[--><!--]--> 3.7 控制流分析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-8-类型谓词" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.8 类型谓词"><!--[--><!--]--> 3.8 类型谓词 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-9-受歧视的unions" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.9 受歧视的unions"><!--[--><!--]--> 3.9 受歧视的unions <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_3-10-never类型与穷尽性检查" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.10 never类型与穷尽性检查"><!--[--><!--]--> 3.10 never类型与穷尽性检查 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#第4章-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="第4章 函数"><!--[--><!--]--> 第4章 函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-1-函数类型表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1 函数类型表达式"><!--[--><!--]--> 4.1 函数类型表达式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-2-调用签名" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2 调用签名"><!--[--><!--]--> 4.2 调用签名 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-3-构造签名" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.3 构造签名"><!--[--><!--]--> 4.3 构造签名 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-4-泛型函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4 泛型函数"><!--[--><!--]--> 4.4 泛型函数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-4-1-类型推断" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.1 类型推断"><!--[--><!--]--> 4.4.1 类型推断 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-4-2-限制条件" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.2 限制条件"><!--[--><!--]--> 4.4.2 限制条件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-4-3-指定类型参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.3 指定类型参数"><!--[--><!--]--> 4.4.3 指定类型参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-4-4-编写函数准则" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.4.4 编写函数准则"><!--[--><!--]--> 4.4.4 编写函数准则 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-5-可选参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5 可选参数"><!--[--><!--]--> 4.5 可选参数 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-5-1-问号标记" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5.1 问号标记"><!--[--><!--]--> 4.5.1 问号标记 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-5-2-回调函数中的可选参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.5.2 回调函数中的可选参数"><!--[--><!--]--> 4.5.2 回调函数中的可选参数 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-6-函数重载" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.6 函数重载"><!--[--><!--]--> 4.6 函数重载 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-6-1-重载签名与实现签名" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.6.1 重载签名与实现签名"><!--[--><!--]--> 4.6.1 重载签名与实现签名 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-6-2-编写重载准则" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.6.2 编写重载准则"><!--[--><!--]--> 4.6.2 编写重载准则 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-6-3-函数内this声明" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.6.3 函数内This声明"><!--[--><!--]--> 4.6.3 函数内This声明 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-7-处理函数的常用类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7 处理函数的常用类型"><!--[--><!--]--> 4.7 处理函数的常用类型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-7-1-void" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7.1 void"><!--[--><!--]--> 4.7.1 void <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-7-2-object" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7.2 object"><!--[--><!--]--> 4.7.2 object <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-7-3-unknown" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7.3 unknown"><!--[--><!--]--> 4.7.3 unknown <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-7-4-never" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7.4 never"><!--[--><!--]--> 4.7.4 never <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-7-5-function" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.7.5 Function"><!--[--><!--]--> 4.7.5 Function <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-8-参数展开运算符" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.8 参数展开运算符"><!--[--><!--]--> 4.8 参数展开运算符 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-8-1-形参展开-rest-parameters" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.8.1 形参展开(Rest Parameters)"><!--[--><!--]--> 4.8.1 形参展开(Rest Parameters) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-8-2-实参展开-rest-arguments" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.8.2 实参展开(Rest Arguments)"><!--[--><!--]--> 4.8.2 实参展开(Rest Arguments) <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_4-9-参数解构" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.9 参数解构"><!--[--><!--]--> 4.9 参数解构 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#第5章-对象类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="第5章 对象类型"><!--[--><!--]--> 第5章 对象类型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-1-属性修改器" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1 属性修改器"><!--[--><!--]--> 5.1 属性修改器 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-1-1-可选属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1.1 可选属性"><!--[--><!--]--> 5.1.1 可选属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-1-2-只读属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1.2 只读属性"><!--[--><!--]--> 5.1.2 只读属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-1-3-索引签名" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1.3 索引签名"><!--[--><!--]--> 5.1.3 索引签名 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-2-扩展类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2 扩展类型"><!--[--><!--]--> 5.2 扩展类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-3-交叉类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.3 交叉类型"><!--[--><!--]--> 5.3 交叉类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-4-泛型对象类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.4 泛型对象类型"><!--[--><!--]--> 5.4 泛型对象类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-5-数组类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.5 数组类型"><!--[--><!--]--> 5.5 数组类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-6-只读数组类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.6 只读数组类型"><!--[--><!--]--> 5.6 只读数组类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-7-元祖类型-tuple" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.7 元祖类型 tuple"><!--[--><!--]--> 5.7 元祖类型 tuple <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_5-8-只读元祖类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.8 只读元祖类型"><!--[--><!--]--> 5.8 只读元祖类型 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#第6章-类型操纵" class="router-link-active router-link-exact-active sidebar-item" aria-label="第6章 类型操纵"><!--[--><!--]--> 第6章 类型操纵 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-1-泛型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1 泛型"><!--[--><!--]--> 6.1 泛型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-1-1-泛型基本用法" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1.1 泛型基本用法"><!--[--><!--]--> 6.1.1 泛型基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-1-2-泛型类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1.2 泛型类型"><!--[--><!--]--> 6.1.2 泛型类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-1-3-泛型类" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1.3 泛型类"><!--[--><!--]--> 6.1.3 泛型类 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-1-4-泛型约束-extends" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1.4 泛型约束 extends"><!--[--><!--]--> 6.1.4 泛型约束 extends <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-1-4-泛型中使用类类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1.4 泛型中使用类类型"><!--[--><!--]--> 6.1.4 泛型中使用类类型 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-2-keyof类型操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2 keyof类型操作符"><!--[--><!--]--> 6.2 keyof类型操作符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-3-typeof类型操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3 typeof类型操作符"><!--[--><!--]--> 6.3 typeof类型操作符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-4-索引访问类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.4 索引访问类型"><!--[--><!--]--> 6.4 索引访问类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-5-条件类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.5 条件类型"><!--[--><!--]--> 6.5 条件类型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-5-1-条件类型约束" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.5.1 条件类型约束"><!--[--><!--]--> 6.5.1 条件类型约束 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-5-2-条件类型推理-infer" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.5.2 条件类型推理 infer"><!--[--><!--]--> 6.5.2 条件类型推理 infer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-5-3-分布式条件类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.5.3 分布式条件类型"><!--[--><!--]--> 6.5.3 分布式条件类型 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-6-映射类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.6 映射类型"><!--[--><!--]--> 6.6 映射类型 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-6-1-映射修改器" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.6.1 映射修改器"><!--[--><!--]--> 6.6.1 映射修改器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/WebNotebook/base/tsplus.html#_6-6-2-属性重映射" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.6.2 属性重映射"><!--[--><!--]--> 6.6.2 属性重映射 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="typescript" tabindex="-1"><a class="header-anchor" href="#typescript" aria-hidden="true">#</a> TypeScript+</h1><h2 id="第1章-typescript配置" tabindex="-1"><a class="header-anchor" href="#第1章-typescript配置" aria-hidden="true">#</a> 第1章 TypeScript配置</h2><h3 id="_1-1-tsc编译器" tabindex="-1"><a class="header-anchor" href="#_1-1-tsc编译器" aria-hidden="true">#</a> 1.1 TSC编译器</h3><ol><li><p>安装tsc编译器：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g typescript
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>编译单个文件：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tsc xxx.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>编译并实时更新单个文件：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tsc --watch xxx.js <span class="token operator">|</span>  tsc -w xxx.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>编译整个项目：（需配置tsconfig的<code>rootDir</code>、<code>outDir</code>）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tsc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>编译并实时更新整个项目：（需配置tsconfig的<code>rootDir</code>、<code>outDir</code>）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tsc --watch <span class="token operator">|</span> tsc -w
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><hr><h3 id="_1-2-tsconfig-json" tabindex="-1"><a class="header-anchor" href="#_1-2-tsconfig-json" aria-hidden="true">#</a> 1.2 tsconfig.json</h3><blockquote><p>使用tsc命令时，后面没有任何参数才会使用tsconfig配置进行编译（<a href="https://juejin.cn/post/6844904093568221191" target="_blank" rel="noopener noreferrer">参考文章<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）</p></blockquote><ol><li><p>创建tsconfig.json文件：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>tsc --init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>常用配置：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es6&quot;</span><span class="token punctuation">,</span>                            <span class="token comment">/* ES目标版本: &#39;ES3&#39;,&#39;ES5&#39;,&#39;ES2015&#39;,&#39;ES2016&#39;,&#39;ES2017&#39;,&#39;ESNEXT&#39; */</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>                       <span class="token comment">/* 指定使用模块: &#39;commonjs&#39;, &#39;amd&#39;, &#39;system&#39;, &#39;umd&#39; or &#39;es2015&#39; */</span>
    <span class="token property">&quot;rootDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>                         <span class="token comment">/* 指定项目代码根目录文件夹 */</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>                         <span class="token comment">/* 为所有编译后的ts文件指定输出路径：默认是每一个ts文件的当前目录 */</span>
    <span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                    <span class="token comment">/* 通过为导入内容创建命名空间，实现CommonJS和ES模块之间的互操作性 */</span>
    <span class="token property">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>   <span class="token comment">/* 确保在import时导入的变量名称是正确的 */</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                             <span class="token comment">/* 开启严格检查模式 */</span>
    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>                        <span class="token comment">/* 跳过对所有.d.ts文件的类型检查 */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_1-2-0-顶层选项" tabindex="-1"><a class="header-anchor" href="#_1-2-0-顶层选项" aria-hidden="true">#</a> 1.2.0 顶层选项</h4><blockquote><p>除了这一层的配置，其余配置全部属于<code>compilerOptions</code></p></blockquote><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 指定需要编译文件 否则默认当前目录下除了exclude之外的所有.ts, .d.ts,.tsx 文件 */</span>
<span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./test.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定需要编译文件 否则默认当前目录下除了exclude之外的所有.ts, .d.ts,.tsx 文件 */</span>
<span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/**/*&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* 不编译某些文件 */</span>
<span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;test.ts&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* 要继承的另一个配置文件的路径，当前配置文件中会自动包含config目录下base.json中的所有配置信息（内容也是tsconfig中的） */</span>
<span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./configs/base&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-1-项目配置" tabindex="-1"><a class="header-anchor" href="#_1-2-1-项目配置" aria-hidden="true">#</a> 1.2.1 项目配置</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 启动增量编译：只编译修改过的文件,这个时候会生成tsconfig.tsbuildinfo,下次编译的时候会进行对比只编译修改过的文件 */</span>
<span class="token property">&quot;incremental&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 是否编译构建引用项目：启用允许TypeScript项目与项目引用一起使用的约束 */</span>
<span class="token property">&quot;composite&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定文件用来存储增量编译信息，默认是tsconfig.tsbuildinfo */</span>
<span class="token property">&quot;tsBuildInfoFile&quot;</span><span class="token operator">:</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;disableSourceOfProjectReferenceRedirect&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;disableSolutionSearching&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 减少TypeScript自动加载的项目数量 */</span>
<span class="token property">&quot;disableReferencedProjectLoad&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-2-语言和环境" tabindex="-1"><a class="header-anchor" href="#_1-2-2-语言和环境" aria-hidden="true">#</a> 1.2.2 语言和环境</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 指定 ECMAScript 目标版本: &#39;ES3&#39; (default), &#39;ES5&#39;, &#39;ES2015&#39;, &#39;ES2016&#39;, &#39;ES2017&#39;, or &#39;ESNEXT&#39; */</span>
<span class="token property">&quot;target&quot;</span><span class="token operator">:</span><span class="token string">&quot;es2016&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定一组绑定的库声明文件，用于描述目标运行时环境：若未指定则注入默认lib，ES5:[DOM,ES5,ScriptHost]，ES6:[DOM,ES6,DOM.Iterable,ScriptHost] */</span>
<span class="token property">&quot;lib&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定 jsx 代码的生成: &#39;preserve&#39;, &#39;react-native&#39;, or &#39;react&#39; */</span>
<span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span><span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 是否启用实验性的装饰器特性 */</span>
<span class="token property">&quot;experimentalDecorators&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 是否为装上去提供元数据支持：元数据也是ES6的新标准，可以通过Reflect提供的静态方法获取元数据，如果需要使用Reflect的一些方法，需要引用ES2015.Reflect这个库 */</span>
<span class="token property">&quot;emitDecoratorMetadata&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;jsxFactory&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;jsxFragmentFactory&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;jsxImportSource&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;reactNamespace&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;noLib&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;useDefineForClassFields&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-3-模块化" tabindex="-1"><a class="header-anchor" href="#_1-2-3-模块化" aria-hidden="true">#</a> 1.2.3 模块化</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 指定使用模块: &#39;commonjs&#39;, &#39;amd&#39;, &#39;system&#39;, &#39;umd&#39; or &#39;es2015&#39; */</span>
<span class="token property">&quot;module&quot;</span><span class="token operator">:</span><span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定项目代码根目录文件夹 */</span>
<span class="token property">&quot;rootDir&quot;</span><span class="token operator">:</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 用于选择模块解析策略，有&#39;node&#39;和&#39;classic&#39;两种类型 */</span>
<span class="token property">&quot;moduleResolution&quot;</span><span class="token operator">:</span><span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 定义路径别名，可以作为文件引入路径（如：&quot;@page&quot;: [&quot;src/page/index&quot;]） */</span>
<span class="token property">&quot;paths&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;rootDirs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定多个类似于&#39;./node_modules/@types&#39;的文件夹：指定声明文件或文件夹的路径列表，如果指定了此项，则只有在这里列出的声明文件才会被加载 */</span>
<span class="token property">&quot;typeRoots&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定需要包含的模块，只有在这里列出的模块的声明文件才会被加载进来 */</span>
<span class="token property">&quot;types&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token property">&quot;allowUmdGlobalAccess&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;noResolve&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-4-js支持" tabindex="-1"><a class="header-anchor" href="#_1-2-4-js支持" aria-hidden="true">#</a> 1.2.4 JS支持</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 是否允许编译JS，可利用checkJS检查错误 */</span>
<span class="token property">&quot;allowJs&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 是否检测JS的语法 */</span>
<span class="token property">&quot;checkJs&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;maxNodeModuleJsDepth&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-5-编译文件" tabindex="-1"><a class="header-anchor" href="#_1-2-5-编译文件" aria-hidden="true">#</a> 1.2.5 编译文件</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 根据项目中的TS和JS生成.d.ts文件：若设为true，编译每个ts文件之后会生成一个js文件和一个声明文件, declaration和allowJs不能同时设为true */</span>
<span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定是否为声明文件.d.ts生成sourcemap文件 */</span>
<span class="token property">&quot;declarationMap&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;emitDeclarationOnly&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 当module设置为 &#39;amd&#39; and &#39;system&#39;时可以使用此命令，将ts文件打包到一个目录下；若declaration为true，同时也指定一个文件包含d.ts的输出 */</span>
<span class="token property">&quot;outFile&quot;</span><span class="token operator">:</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 为所有编译后的ts文件指定输出路径：默认是每一个ts文件的当前目录 */</span>
<span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span><span class="token string">&quot;./dist&quot;</span>
<span class="token comment">/* 编译时删除注释 */</span>
<span class="token property">&quot;removeComments&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 不生成编译文件，outDir指定的输出目录下将没有任何文件，但是会进行编译，有错误会抛出 */</span>
<span class="token property">&quot;noEmit&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 允许每个项目从tslib导入一次helper函数，而不是每个文件都包含它们：是否引入npm包tslib中的辅助函数，如__extends等  */</span>
<span class="token property">&quot;importHelpers&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;importsNotUsedAsValues&quot;</span><span class="token operator">:</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 生成兼容性强（但冗长且性能较差）的JavaScript用于迭代：当target为&#39;ES5&#39; or &#39;ES3&#39;时，为&#39;for-of&#39;, spread, and destructuring&#39;中的迭代器提供完全支持 */</span>
<span class="token property">&quot;downlevelIteration&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定调试器应该找到TypeScript文件而不是源文件的位置，这个值会被写进.map文件里 */</span>
<span class="token property">&quot;sourceRoot&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定调试器找到映射文件而非生成文件的位置，指定map文件的根路径，该选项会影响.map文件中的sources属性 */</span>
<span class="token property">&quot;mapRoot&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定是否将map文件内容和js文件编译在一个同一个js文件中，如果设为true，则map的内容会以//#soureMappingURL=开头，然后接base64字符串的形式插入在js文件底部 */</span>
<span class="token property">&quot;inlineSourceMap&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定是否进一步将ts文件的内容也包含到输出文件中 */</span>
<span class="token property">&quot;inlineSources&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;emitBOM&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;newLine&quot;</span><span class="token operator">:</span><span class="token string">&quot;crlf&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;stripInternal&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;noEmitHelpers&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;noEmitOnError&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;preserveConstEnums&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;declarationDir&quot;</span><span class="token operator">:</span><span class="token string">&quot;./&quot;</span><span class="token punctuation">,</span>
<span class="token property">&quot;preserveValueImports&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-6-相互约束" tabindex="-1"><a class="header-anchor" href="#_1-2-6-相互约束" aria-hidden="true">#</a> 1.2.6 相互约束</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 确保每个文件可以安全转译，而不依赖于其他导入：是否将每个文件作为单独的模块，默认为true，不可以和declaration同时设定 */</span>
<span class="token property">&quot;isolatedModules&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 指定允许从没有默认导出的模块中默认导入：当一个模块没有默认导出时，允许&#39;import x from y&#39; */</span>
<span class="token property">&quot;allowSyntheticDefaultImports&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 通过为导入内容创建命名空间，实现CommonJS和ES模块之间的互操作性（开启后，allowSyntheticDefaultImports自动同时被设为true）*/</span>
<span class="token property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token comment">/* 不把符号链接解析为真实路径 */</span>
<span class="token property">&quot;preserveSymlinks&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 确保在import时导入的变量名称是正确的 */</span>
<span class="token property">&quot;forceConsistentCasingInFileNames&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-7-类型检查" tabindex="-1"><a class="header-anchor" href="#_1-2-7-类型检查" aria-hidden="true">#</a> 1.2.7 类型检查</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 开启严格检查模式 */</span>
<span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 不允许变量或函数参数具有隐式any类型 */</span>
<span class="token property">&quot;noImplicitAny&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* null和undefined类型检测 */</span>
<span class="token property">&quot;strictNullChecks&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 对函数参数进行严格逆变比较：在给函数赋值时，要确保参数和返回值是子类型兼容的 */</span>
<span class="token property">&quot;strictFunctionTypes&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检查&#39;bind&#39;、&#39;call&#39;、&#39;apply&#39;方法的参数是否与原始函数匹配 */</span>
<span class="token property">&quot;strictBindCallApply&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检查在构造函数中声明但没有设置的类属性 */</span>
<span class="token property">&quot;strictPropertyInitialization&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 当&#39;this&#39;被赋予类型&#39;any&#39;时，启用错误报告 */</span>
<span class="token property">&quot;noImplicitThis&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 将catch子句变量类型为unknown而不是any */</span>
<span class="token property">&quot;useUnknownInCatchVariables&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 使用js的严格模式：在每一个文件上部自动声明 use strict */</span>
<span class="token property">&quot;alwaysStrict&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检测定义了但是没使用的变量：默认为false */</span>
<span class="token property">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检查是否有在函数体中没有使用的参数 */</span>
<span class="token property">&quot;noUnusedParameters&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 解释已写入的可选属性类型，而不是添加undefined */</span>
<span class="token property">&quot;exactOptionalPropertyTypes&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检查函数是否有返回值：设为true后，如果函数没有返回值则会提示 */</span>
<span class="token property">&quot;noImplicitReturns&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检查switch中是否有case没有使用break跳出switch */</span>
<span class="token property">&quot;noFallthroughCasesInSwitch&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 检查在索引签名结果中是否包含undefined */</span>
<span class="token property">&quot;noUncheckedIndexedAccess&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;noImplicitOverride&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token property">&quot;noPropertyAccessFromIndexSignature&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 允许存在未使用的标签 */</span>
<span class="token property">&quot;allowUnusedLabels&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 允许存在不可访问的代码 */</span>
<span class="token property">&quot;allowUnreachableCode&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="_1-2-8-完整性" tabindex="-1"><a class="header-anchor" href="#_1-2-8-完整性" aria-hidden="true">#</a> 1.2.8 完整性</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">/* 跳过对包含在TS中的.d.ts文件的类型检查 */</span>
<span class="token property">&quot;skipDefaultLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token comment">/* 跳过对所有.d.ts文件的类型检查 */</span>
<span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="第2章-常用类型" tabindex="-1"><a class="header-anchor" href="#第2章-常用类型" aria-hidden="true">#</a> 第2章 常用类型</h2><h3 id="_2-1-基元类型" tabindex="-1"><a class="header-anchor" href="#_2-1-基元类型" aria-hidden="true">#</a> 2.1 基元类型</h3><blockquote><p>7种基元类型：string、number、bigint、boolean、symbol、null、undefined</p></blockquote><ol><li><p><code>string</code>：表示字符串值，如&quot;Hello,world&quot;</p></li><li><p><code>number</code>：表示数字值，如42；JavaScript没有一个特殊的整数运行时值，所以没有等价于int或float类型，一切都只是number</p></li><li><p><code>boolean</code>：只有两个值true和false</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> str<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#39;hello typescript&#39;</span>
<span class="token keyword">let</span> num<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">let</span> bool<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-2-数组" tabindex="-1"><a class="header-anchor" href="#_2-2-数组" aria-hidden="true">#</a> 2.2 数组</h3><ol><li><p>语法1：<code>type[]</code>，如：<code>number[]</code>代表数字数组，<code>string[]</code>代表字符串数组</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> arr<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>语法2：<code> Array&lt;type&gt;</code>，如<code>Array&lt;number&gt;</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> arr2<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">]</span>	<span class="token comment">// 报错：不能将类型“string”分配给类型“number”</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-3-any" tabindex="-1"><a class="header-anchor" href="#_2-3-any" aria-hidden="true">#</a> 2.3 any</h3><ol><li><p>作用：当你不希望某个特定值导致类型检查错误时，可以使用它。</p></li><li><p>当一个值的类型是any时，可以访问它的任何属性，将它分配给任何类型的值，或者几乎任何其他语法上的东西都合法的，但编译后的JS可能有错误</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> obj<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
<span class="token comment">// 以下代码行都不会抛出编译器错误</span>
<span class="token comment">// 使用&#39;any&#39;将禁用所有进一步的类型检查</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 编译后的文件会报错</span>
<span class="token function">obj</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token number">100</span>
obj <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token keyword">const</span> n<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> obj
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>tsconfig.json配置：<code>noImplicitAny</code></p><p>1）当不指定类型时，并且TypeScript无法从上下文推断它时，编译器通常会默认为any</p><p>2）<code>noImplicitAny</code>设置为<code>true</code>将任何隐式标记any为错误</p></li></ol><hr><h3 id="_2-4-类型注释" tabindex="-1"><a class="header-anchor" href="#_2-4-类型注释" aria-hidden="true">#</a> 2.4 类型注释</h3><blockquote><p>类型注释由编译器删除，不会影响代码的运行时行为</p></blockquote><ol><li><p>使用<code>const</code>、<code>var</code>、<code>let</code>，可以选择添加类型注释来显式指定变量的类型：TS不使用”左边的类型“风格的声明，类型注解总是在后面</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> myName<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;Felixlu&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>大多数情况下，不必输入类型注释，TS会根据其初始化器的类型自动推断</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 不需要类型定义--“myName”推断为类型“string”</span>
<span class="token keyword">let</span> myName <span class="token operator">=</span> <span class="token string">&quot;Felixlu&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-5-函数" tabindex="-1"><a class="header-anchor" href="#_2-5-函数" aria-hidden="true">#</a> 2.5 函数</h3><ol><li><p>参数类型注释：声明函数时，可以在每个参数后添加类型注解，以声明函数接受的参数类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;!!&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>返回类型注释：出现在参数列表之后，通常不需要返回类型注释，因为TS会根据其return语句推断函数的返回类型。某些代码库会出于文档目的明确指定返回类型，以防止意外更改或仅出于个人偏好。</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getFavoriteNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">26</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>匿名函数：与函数声明有点不同，当一个函数出现在TypeScript可以确定它将如何被调用的地方时，该函数的参数会自动指定类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 这里没有类型注释，但是TypeScript可以发现错误</span>
<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;小千&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;小锋&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;小猿&#39;</span><span class="token punctuation">]</span>
<span class="token comment">// 函数上下文类型</span>
<span class="token comment">// 即使参数s没有类型注释，TypeScript也会使用forEach函数的类型，以及数组的推断类型来确定s的类型</span>
names<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 上下文类型也适用于箭头函数</span>
names<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-6-对象" tabindex="-1"><a class="header-anchor" href="#_2-6-对象" aria-hidden="true">#</a> 2.6 对象</h3><ol><li><p>语法：使用<code>,</code>或<code>;</code>来分隔属性</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printCoord</span><span class="token punctuation">(</span>pt<span class="token operator">:</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;坐标的x值为：&#39;</span> <span class="token operator">+</span> pt<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;坐标的y值为：&#39;</span> <span class="token operator">+</span> pt<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">printCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">7</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可选属性：可以指定其部分或全部属性是可选的，在属性名称后添加一个<code>?</code>：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printName</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> last<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  first<span class="token operator">:</span> <span class="token string">&#39;Felix&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  first<span class="token operator">:</span> <span class="token string">&#39;Felix&#39;</span><span class="token punctuation">,</span>
  last<span class="token operator">:</span> <span class="token string">&#39;Lu&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>注意：当读取可选属性时，必须使用它之前用<code>undefined</code>进行检查</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printName</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token punctuation">{</span> first<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> last<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 错误 - &#39;obj.last&#39; 可能不存在</span>
  <span class="token comment">// console.log(obj.last.toUpperCase())</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>last <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>last<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>last<span class="token operator">?.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-7-联合类型-union" tabindex="-1"><a class="header-anchor" href="#_2-7-联合类型-union" aria-hidden="true">#</a> 2.7 联合类型 union</h3><ol><li><p>定义联合类型：由两个或多个其他类型组成的类型，表示可能是这些类型中的任何一种的值，每一种称为联合类型的成员</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Your ID is: &#39;</span> <span class="token operator">+</span> id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 正确</span>
<span class="token function">printId</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span>
<span class="token comment">// 正确</span>
<span class="token function">printId</span><span class="token punctuation">(</span><span class="token string">&#39;202&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 错误</span>
<span class="token function">printId</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  MyId<span class="token operator">:</span> <span class="token number">123456</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用联合类型：如果有联合类型string | number，则不能只使用一种类型的操作，需要缩小联合</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 案例1</span>
<span class="token keyword">function</span> <span class="token function">printId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 错误写法</span>
  <span class="token comment">// console.log(&#39;Your ID is: &#39; + id)</span>
  <span class="token comment">// console.log(id.toUpperCase())</span>
  
  <span class="token comment">// 正确写法</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 案例2</span>
<span class="token keyword">function</span> <span class="token function">welcomePeople</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, &#39;</span> <span class="token operator">+</span> x<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39; and &#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Welcome lone traveler&#39;</span> <span class="token operator">+</span> x<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">welcomePeople</span><span class="token punctuation">(</span><span class="token string">&#39;A&#39;</span><span class="token punctuation">)</span>
<span class="token function">welcomePeople</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如果联合中的每个成员都有一个共同的属性，则可以使用该属性而不会缩小范围，如数组和字符串都有一个slice方法</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getFirstThree</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getFirstThree</span><span class="token punctuation">(</span><span class="token string">&#39;abcdefg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getFirstThree</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-8-类型别名-type" tabindex="-1"><a class="header-anchor" href="#_2-8-类型别名-type" aria-hidden="true">#</a> 2.8 类型别名 type</h3><ol><li><p>类型别名：一个名称为任何类型的定义，适用于多次使用同一个类型的场景</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">printCoord</span><span class="token punctuation">(</span>pt<span class="token operator">:</span> Point<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;坐标x的值是： &quot;</span> <span class="token operator">+</span> pt<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;坐标y的值是： &quot;</span> <span class="token operator">+</span> pt<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">printCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可以使用类型别名为任何类型命名，不仅仅是对象类型，如可以命名联合类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">ID</span></span> <span class="token operator">=</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span>

<span class="token keyword">function</span> <span class="token function">printId</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token constant">ID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">printId</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">printId</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用别名时，就像编写了别名类型一样：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">UserInputSanitizedString</span> <span class="token operator">=</span> <span class="token builtin">string</span>

<span class="token comment">// UserInputSanitizedString相当于string</span>
<span class="token keyword">function</span> <span class="token function">sanitizedInput</span><span class="token punctuation">(</span>str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> UserInputSanitizedString <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> userInput <span class="token operator">=</span> <span class="token function">sanitizedInput</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
userInput <span class="token operator">=</span> <span class="token string">&#39;new Input&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-9-接口-interface" tabindex="-1"><a class="header-anchor" href="#_2-9-接口-interface" aria-hidden="true">#</a> 2.9 接口 interface</h3><blockquote><p>大多数情况下，可以根据个人喜好进行选择，启发式使用interface，在需要时使用type</p></blockquote><img src="/WebNotebook/imgs/basic/接口与交叉类型.png" alt="接口与交叉类型"><ol><li><p>接口：是另一种方式来命名对象类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">printCoord</span><span class="token punctuation">(</span>pt<span class="token operator">:</span> Point<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;坐标x的值是： &quot;</span> <span class="token operator">+</span> pt<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;坐标y的值是： &quot;</span> <span class="token operator">+</span> pt<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">printCoord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">200</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>扩展：</p><p>1）接口：interface，使用<code>extends</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 扩展接口</span>
<span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Bear</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  honey<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> bear<span class="token operator">:</span> Bear <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;winie&#39;</span><span class="token punctuation">,</span>
  honey<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bear<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bear<span class="token punctuation">.</span>honey<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）类型声明：type，使用<code>&amp;</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 通过交叉点扩展类型</span>
<span class="token keyword">type</span> <span class="token class-name">Animal</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Bear</span> <span class="token operator">=</span> Animal <span class="token operator">&amp;</span> <span class="token punctuation">{</span>
  honey<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> bear<span class="token operator">:</span> Bear <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;winnie&#39;</span><span class="token punctuation">,</span>
  honey<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bear<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bear<span class="token punctuation">.</span>honey<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>添加新字段：类型别名可能不参与声明合并，但接口可以</p><p>1）接口：interface，两个同名接口可以合并</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 向现有的类型添加字段</span>
<span class="token keyword">interface</span> <span class="token class-name">MyWindow</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">MyWindow</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> w<span class="token operator">:</span> MyWindow <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token string">&#39;hello ts&#39;</span><span class="token punctuation">,</span>
  count<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）类型声明：type，两个同名类型声明会报错</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 类型创建后不能更改</span>
<span class="token keyword">type</span> <span class="token class-name">MyWindow</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 报错</span>
<span class="token keyword">type</span> <span class="token class-name">MyWindow</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>接口只能用于声明对象的形状，不能重命名基元类型（string、number、boolean）</p><p>1）类型声明：type，可以对基元类型用自定义别名代替</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">SanitizedString</span> <span class="token operator">=</span> <span class="token builtin">string</span>
<span class="token keyword">type</span> <span class="token class-name">EvenNumber</span> <span class="token operator">=</span> <span class="token builtin">number</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2）接口：interface，无法重命名基元类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 报错</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">X</span></span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">string</span></span> <span class="token punctuation">{</span>
   <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在v4.2之前，类型别名可能出现在错误消息中，有时会代替等效的匿名类型，接口将始终在错误消息中命名</p><p>1）接口：interface</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 编译器错误消息将始终使用接口的名称</span>
<span class="token keyword">interface</span> <span class="token class-name">Mammal</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">echoMammal</span><span class="token punctuation">(</span>m<span class="token operator">:</span> Mammal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 例：下面的错误将总是使用 &quot;Mammal&quot; 来引用预期的类型</span>
<span class="token comment">// The expected type comes from property &#39;name&#39; which is declared here on type &#39;Mammal&#39;</span>
<span class="token function">echoMammal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  name<span class="token operator">:</span> <span class="token number">12343</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）类型别名：type</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">echoAnimal</span><span class="token punctuation">(</span>m<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 编译器报错时，只引用了type &#39;{ name: string; }&#39;</span>
<span class="token comment">// The expected type comes from property &#39;name&#39; which is declared here on type &#39;{ name: string; }&#39;</span>
<span class="token function">echoAnimal</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">12345</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 当一个类型没有经过任何形式的操作时，仍然可以获得作为引用的名称</span>
<span class="token keyword">type</span> <span class="token class-name">Lizard</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">echoLizard</span><span class="token punctuation">(</span>l<span class="token operator">:</span> Lizard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 例：这里依然引用为&quot;Lizard&quot;</span>
<span class="token comment">// The expected type comes from property &#39;name&#39; which is declared here on type &#39;Lizard&#39;</span>
<span class="token function">echoLizard</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 但是当类型被转换时，例如通过Omit操作，错误消息将显示结果类型而不是名称</span>
<span class="token keyword">type</span> <span class="token class-name">Arachnid</span> <span class="token operator">=</span> Omit<span class="token operator">&lt;</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> legs<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;legs&#39;</span><span class="token operator">&gt;</span> 
<span class="token keyword">function</span> <span class="token function">echoSpider</span><span class="token punctuation">(</span>l<span class="token operator">:</span> Arachnid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// The expected type comes from property &#39;name&#39; which is declared here on type &#39;Pick&lt;{ name: string; legs: 8; }, &quot;name&quot;&gt;&#39;</span>
<span class="token function">echoSpider</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span> legs<span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-10-类型断言-as" tabindex="-1"><a class="header-anchor" href="#_2-10-类型断言-as" aria-hidden="true">#</a> 2.10 类型断言 as</h3><blockquote><p>类型断言由编译器删除，不会影响代码的运行时行为</p></blockquote><ol><li><p>应用场景：当获得有关TS不知道的值类型的信息时，需要加类型断言<code>as</code>防止报错。</p></li><li><p>案例：如果你正在使用<code>document.getElementById</code>，TypeScript只知道这将返回某种类型的<code>HTMLElement</code>，但你可能知道你的页面将始终具有<code>HTMLCanvasElement</code>给定ID的值，可以使用类型断言来指定更具体的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> myCanvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;main_canvas&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLCanvasElement
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>尖括号语法：（除非代码在<code>.tsx</code>文件中）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> myCanvas2 <span class="token operator">=</span> <span class="token operator">&lt;</span>HTMLCanvasElement<span class="token operator">&gt;</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;main_canvas&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>注意：因为类型断言在编译时被移除，所以没有与类型断言相关联的运行时检查，<code>null</code>如果类型断言错误，则不会出现异常</p></li><li><p>TS只允许类型断言转换为更具体或不太具体的类型版本，此规则可防止“不可能”的强制：</p><p>1）将类型 string 转换为类型 number 可能是错误的，因为两种类型都没有充分重叠</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span> <span class="token keyword">as</span> <span class="token builtin">number</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2）如果有意为之，先将表达式转换为<code>any</code>或<code>unknown</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">number</span>
<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span> <span class="token keyword">as</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">number</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-11-文字类型" tabindex="-1"><a class="header-anchor" href="#_2-11-文字类型" aria-hidden="true">#</a> 2.11 文字类型</h3><ol><li><p>声明变量：</p><p>1）允许更改变量中保存的内容：<code>var</code>、<code>let</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> testString <span class="token operator">=</span> <span class="token string">&#39;Hello World&#39;</span>
testString <span class="token operator">=</span> <span class="token string">&#39;Olá Mundo&#39;</span>	<span class="token comment">// 类型为string</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2）不允许更改变量中保存的内容：<code>const</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> constantString <span class="token operator">=</span> <span class="token string">&#39;Hello World&#39;</span>
constantString	<span class="token comment">// 类型为文字类型</span>
<span class="token comment">// constantString = &#39;Olá Mundo&#39;	// 报错，无法更改</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>文本文字类型：</p><p>1）单一类型：只能有一个特定值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token comment">// 正确</span>
x <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span>
<span class="token comment">// 错误</span>
<span class="token comment">// x = &#39;world&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）联合类型：表示只接受一组特定已知值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printText</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> alignment<span class="token operator">:</span> <span class="token string">&#39;left&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;right&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;center&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
<span class="token punctuation">}</span>
<span class="token function">printText</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;left&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 报错</span>
<span class="token comment">// printText(&#39;world&#39;, &#39;center2&#39;)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>数字文字类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">===</span> b <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> a <span class="token operator">&gt;</span> b <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>布尔文字类型：类型boolean本身实际上只是联合类型<code>true|false</code>的别名</p></li><li><p>与非文字类型结合使用</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">configure</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Options <span class="token operator">|</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......（缩小联合）</span>
<span class="token punctuation">}</span>
<span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">configure</span><span class="token punctuation">(</span><span class="token string">&#39;auto&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// 报错</span>
<span class="token comment">// configure(&#39;automatic&#39;)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>文字推理：使用对象初始化变量时，TypeScript假定该对象的属性稍后可能会更改值</p><p>1）案例1：由于<code>obj.count</code>的值初始化时被赋予的是0，TS自动判断后期<code>obj.count</code>被赋值的类型为<code>number</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）案例2：TS认为<code>req.method</code>被认为赋值的类型为<code>string</code>，而不是<code>GET</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">handleRequest</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;POST&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;GUESS&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">&#39;https://example.com&#39;</span><span class="token punctuation">,</span>
  method<span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 报错：req.method</span>
<span class="token function">handleRequest</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> req<span class="token punctuation">.</span>method<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 解决方案1：在任一位置添加类型断言来更改推理</span>

<span class="token comment">// 方法1：我想让req.method始终拥有文字类型GET，从而防止之后可能分配&quot;GUESS&quot;给该字段</span>
<span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">&quot;https://example.com&quot;</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token keyword">as</span> <span class="token string">&quot;GET&quot;</span> <span class="token punctuation">}</span>

<span class="token comment">// 方法2：我知道其他原因req.method具有 &quot;GET&quot; 值</span>
<span class="token function">handleRequest</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> req<span class="token punctuation">.</span>method <span class="token keyword">as</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 解决方案2：使用 as const 将整个对象转换为类型文字</span>
<span class="token comment">// as const后缀就像const定义，确保所有属性分配的文本类型，而不是一个更一般的string或number</span>
<span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span>
  url<span class="token operator">:</span> <span class="token string">&#39;https://example.com&#39;</span><span class="token punctuation">,</span>
  method<span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-12-null-undefined" tabindex="-1"><a class="header-anchor" href="#_2-12-null-undefined" aria-hidden="true">#</a> 2.12 null/undefined</h3><ol><li><p><code>strictNullChecks</code>选项设置：建议开启</p><p>1）false：关闭，仍然可以正常访问的值，并且可以将值分配给任何类型的属性，这类似于没有空检查的语言（例如C#、Java）的行为方式，缺乏对这些值的检查往往是错误的主要来源</p><p>2）true：开启，需要在对该值使用方法或属性之前测试这些值，可以使用缩小来检查可能的值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, &#39;</span> <span class="token operator">+</span> x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>非空断言运算符：后缀加感叹号<code>!</code>，表示该值不是 null 或 undefined</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">liveDangerously</span><span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-13-枚举-enum" tabindex="-1"><a class="header-anchor" href="#_2-13-枚举-enum" aria-hidden="true">#</a> 2.13 枚举 enum</h3><blockquote><p>枚举允许开发者定义一组命名的常量。使用枚举可以使其更容易记录意图，或创建一组不同的情况。TypeScript提供了基于数字和字符串的枚举</p></blockquote><h4 id="_2-13-1-数值型枚举" tabindex="-1"><a class="header-anchor" href="#_2-13-1-数值型枚举" aria-hidden="true">#</a> 2.13.1 数值型枚举</h4><ol><li><p>定义数值型枚举：赋予第一个成员初始值，若不赋予则默认为0，所有下面的成员从初始值开始自动递增</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
  Up <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>	<span class="token comment">// 如果不赋予初始值，直接写UP，默认初始值为0</span>
  Down<span class="token punctuation">,</span>		<span class="token comment">// 2</span>
  Left<span class="token punctuation">,</span>		<span class="token comment">// 3</span>
  Right<span class="token punctuation">,</span>	<span class="token comment">// 4</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用数值型枚举：只需将任何成员作为枚举本身的一个属性来访问，并使用枚举的名称来声明类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> UserResponse <span class="token punctuation">{</span>
  No <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Yes <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用枚举的名称来声明类型</span>
<span class="token keyword">function</span> <span class="token function">respond</span><span class="token punctuation">(</span>recipient<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> message<span class="token operator">:</span> UserResponse<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 将任何成员作为枚举本身的一个属性来访问</span>
<span class="token function">respond</span><span class="token punctuation">(</span><span class="token string">&quot;Princess Caroline&quot;</span><span class="token punctuation">,</span> UserResponse<span class="token punctuation">.</span>Yes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>数字枚举可以混合在计算和常量成员中，没有初始化器的枚举要么需要放在第一位，要么必须放在用数字常量或其他常量枚举成员初始化的数字枚举之后</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> <span class="token constant">E</span> <span class="token punctuation">{</span>
  <span class="token constant">A</span> <span class="token operator">=</span> <span class="token function">getSomeValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token constant">B</span><span class="token punctuation">,</span>	<span class="token comment">// 报错：Enum成员必须有初始化器</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-2-字符串枚举" tabindex="-1"><a class="header-anchor" href="#_2-13-2-字符串枚举" aria-hidden="true">#</a> 2.13.2 字符串枚举</h4><ol><li><p>作用：字符串枚举允许你在代码运行时给出一个有意义的、可读的值，与枚举成员本身的名称无关</p></li><li><p>每个成员都必须用一个字符串字头或另一个字符串枚举成员进行常量初始化</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
  Up <span class="token operator">=</span> <span class="token string">&quot;UP&quot;</span><span class="token punctuation">,</span>
  Down <span class="token operator">=</span> <span class="token string">&quot;DOWN&quot;</span><span class="token punctuation">,</span>
  Left <span class="token operator">=</span> <span class="token string">&quot;LEFT&quot;</span><span class="token punctuation">,</span>
  Right <span class="token operator">=</span> <span class="token string">&quot;RIGHT&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-3-异构枚举" tabindex="-1"><a class="header-anchor" href="#_2-13-3-异构枚举" aria-hidden="true">#</a> 2.13.3 异构枚举</h4><ol><li><p>枚举可以与字符串和数字成员混合（不建议这样写）：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> BooleanLikeHeterogeneousEnum <span class="token punctuation">{</span>
  No <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Yes <span class="token operator">=</span> <span class="token string">&quot;YES&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-4-计算型和常量型成员" tabindex="-1"><a class="header-anchor" href="#_2-13-4-计算型和常量型成员" aria-hidden="true">#</a> 2.13.4 计算型和常量型成员</h4><ol><li><p>常量型成员：</p><p>1）枚举中的第一个成员，没有初始化器，默认赋值为0</p><p>2）枚举中非第一个成员，没有初始化器，前枚举成员为常数，则值为前成员值+1</p><p>3）用常量枚举表达式初始化的成员</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> <span class="token constant">E</span> <span class="token punctuation">{</span> <span class="token constant">X</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
<span class="token keyword">enum</span> <span class="token constant">E1</span> <span class="token punctuation">{</span> <span class="token constant">X</span><span class="token punctuation">,</span><span class="token constant">Y</span><span class="token punctuation">,</span><span class="token constant">Z</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
<span class="token keyword">enum</span> <span class="token constant">E2</span> <span class="token punctuation">{</span> <span class="token constant">A</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token constant">C</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>常量枚举表达式：</p><p>1）文字枚举表达式（基本上是字符串文字或数字文字）</p><p>2）对先前定义的常量枚举成员的引用（可以源自不同的枚举）</p><p>3）带括号的常量枚举表达式</p><p>4）应用于常量枚举表达式的<code>+</code>,<code>-</code>,<code>~</code>单项运算符之一</p><p>5）以常量枚举表达式作为操作数的二元运算符</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>+, -, *, /, %, &lt;&lt;, &gt;&gt;, &gt;&gt;&gt;, &amp;, |, ^
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6）注意：如果常量枚举表达式被评估为<code>NaN</code>或<code>Infinity</code>，这是一个编译时错误</p></li><li><p>计算型成员：在所有其他情况下，枚举成员被认为是计算的</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> FileAccess <span class="token punctuation">{</span>
  <span class="token comment">// 常量型成员</span>
  None<span class="token punctuation">,</span>
  Read <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Write <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
  ReadWrite <span class="token operator">=</span> Read <span class="token operator">|</span> Write<span class="token punctuation">,</span>
  <span class="token comment">// 计算型成员</span>
  <span class="token constant">G</span> <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-5-联合枚举和枚举成员类型" tabindex="-1"><a class="header-anchor" href="#_2-13-5-联合枚举和枚举成员类型" aria-hidden="true">#</a> 2.13.5 联合枚举和枚举成员类型</h4><ol><li><p>字面枚举成员：没有初始化值的常量枚举成员，或者其值被初始化为：</p><p>1）任何字符串文字（例如&quot;foo&quot;, &quot;bar, &quot;baz&quot;）</p><p>2）任何数字文字（例如1, 100）</p><p>3）应用于任何数字字面的单数减号（例如-1, -100）</p></li><li><p>当枚举中的所有成员都具有字面枚举值时：</p><p>1）枚举成员也成为了类型：某些成员只能有一个枚举成员的值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> ShapeKind <span class="token punctuation">{</span>
  Circle<span class="token punctuation">,</span>
  Square<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 注意：这里的Circle和枚举中的Circle不是一个东西，只是名称相同而已</span>
<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> ShapeKind<span class="token punctuation">.</span>Circle<span class="token punctuation">;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 同上</span>
<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> ShapeKind<span class="token punctuation">.</span>Square<span class="token punctuation">;</span>
  sideLength<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">let</span> c<span class="token operator">:</span> Circle <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 报错：Type &#39;ShapeKind.Square&#39; is not assignable to type &#39;ShapeKind.Circle&#39;</span>
  <span class="token comment">// 因为Circle接口中定义的kind，只能是ShapeKind枚举中的Circle，而不能是Square</span>
  kind<span class="token operator">:</span> ShapeKind<span class="token punctuation">.</span>Square<span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）枚举类型本身有效地成为每个枚举成员的联合（union），可以让TS检查出无意义的运算语句</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> <span class="token constant">E</span> <span class="token punctuation">{</span>
  Foo<span class="token punctuation">,</span>
  Bar<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 传入的参数x，只可能是2个值：E.foo、E.Bar，如果x不是E.foo，那必然是E.Bar</span>
<span class="token comment">// 如果x=E.foo，if语句执行后者返回true；如果x=E.Bar，if语句执行前者返回true</span>
<span class="token comment">// 也就是说无论如何都会执行if语句，那这句话就是废话</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">E</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 报错：This condition will always return &#39;true&#39; since the types &#39;E.Foo&#39; and &#39;E.Bar&#39; have no overlap.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">!==</span> <span class="token constant">E</span><span class="token punctuation">.</span>Foo <span class="token operator">||</span> x <span class="token operator">!==</span> <span class="token constant">E</span><span class="token punctuation">.</span>Bar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//......</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-6-运行时的枚举" tabindex="-1"><a class="header-anchor" href="#_2-13-6-运行时的枚举" aria-hidden="true">#</a> 2.13.6 运行时的枚举</h4><ol><li><p>枚举是在运行时存在的真实对象，可以被传递给函数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> <span class="token constant">E</span> <span class="token punctuation">{</span> <span class="token constant">X</span><span class="token punctuation">,</span><span class="token constant">Y</span><span class="token punctuation">,</span><span class="token constant">Z</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
 
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">X</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">.</span><span class="token constant">X</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 可以正常工作，因为&#39;E&#39;有一个名为&#39;X&#39;的属性，是一个数字</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">E</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-7-编译时的枚举" tabindex="-1"><a class="header-anchor" href="#_2-13-7-编译时的枚举" aria-hidden="true">#</a> 2.13.7 编译时的枚举</h4><ol><li><p><code>keyof typeof</code>：可以将枚举转换为所有成员的字符串文字联合类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> LogLevel <span class="token punctuation">{</span>
  <span class="token constant">ERROR</span><span class="token punctuation">,</span>
  <span class="token constant">WARN</span><span class="token punctuation">,</span>
  <span class="token constant">INFO</span><span class="token punctuation">,</span>
  <span class="token constant">DEBUG</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// 相当于：type LogLevelStrings = &#39;ERROR&#39; | &#39;WARN&#39; | &#39;INFO&#39; | &#39;DEBUG&#39;</span>
<span class="token keyword">type</span> <span class="token class-name">LogLevelStrings</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> LogLevel

<span class="token comment">// 例子</span>
<span class="token keyword">function</span> <span class="token function">printImportant</span><span class="token punctuation">(</span>key<span class="token operator">:</span> LogLevelStrings<span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> LogLevel<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> LogLevel<span class="token punctuation">.</span><span class="token constant">DEBUG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Log level key is:&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Log level value is:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Log level message is:&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">printImportant</span><span class="token punctuation">(</span><span class="token string">&quot;ERROR&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;This is a message&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>反向映射：</p><p>1）数值型枚举成员：可以得到从枚举值到枚举名称的反向映射</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">enum</span> Enum <span class="token punctuation">{</span> <span class="token constant">A</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> Enum<span class="token punctuation">.</span><span class="token constant">A</span>
<span class="token keyword">let</span> nameOfA <span class="token operator">=</span> Enum<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token comment">// &quot;A&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）字符串枚举成员：根本不会被生成反向映射</p></li><li><p>const枚举：可以避免在访问枚举值时产生额外代码和间接性代价</p><p>1）语法：使用枚举上的const修饰符来定义</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token keyword">enum</span> Enum <span class="token punctuation">{</span>
  <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）常量枚举：只能使用常量枚举表达式，在编译过程中被完全删除</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// ts原始代码</span>
<span class="token keyword">const</span> <span class="token keyword">enum</span> Direction <span class="token punctuation">{</span>
  Up<span class="token punctuation">,</span>
  Down<span class="token punctuation">,</span>
  Left<span class="token punctuation">,</span>
  Right<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">let</span> directions <span class="token operator">=</span> <span class="token punctuation">[</span>
  Direction<span class="token punctuation">.</span>Up<span class="token punctuation">,</span>
  Direction<span class="token punctuation">.</span>Down<span class="token punctuation">,</span>
  Direction<span class="token punctuation">.</span>Left<span class="token punctuation">,</span>
  Direction<span class="token punctuation">.</span>Right<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 编译后JS代码</span>
<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> directions <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token number">0</span> <span class="token comment">/* Up */</span><span class="token punctuation">,</span>
    <span class="token number">1</span> <span class="token comment">/* Down */</span><span class="token punctuation">,</span>
    <span class="token number">2</span> <span class="token comment">/* Left */</span><span class="token punctuation">,</span>
    <span class="token number">3</span> <span class="token comment">/* Right */</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_2-13-8-环境枚举-declear" tabindex="-1"><a class="header-anchor" href="#_2-13-8-环境枚举-declear" aria-hidden="true">#</a> 2.13.8 环境枚举 declear</h4><ol><li><p>环境枚举：用来描述已经存在的枚举类型的形状</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">enum</span> Enum <span class="token punctuation">{</span>
  <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token constant">B</span><span class="token punctuation">,</span>
  <span class="token constant">C</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>与非环境枚举的区别：</p><p>1）在常规枚举中，如果其前面的枚举成员被认为是常量，那么没有初始化器的成员也将被认为是常量型成员</p><p>2）相反，一个没有初始化器的环境（和非常量）枚举成员总是被认为是计算型成员</p></li></ol><hr><h4 id="_2-13-9-对象与枚举" tabindex="-1"><a class="header-anchor" href="#_2-13-9-对象与枚举" aria-hidden="true">#</a> 2.13.9 对象与枚举</h4><blockquote><p>一般情况下，可能不需要枚举，因为对象可以满足正常需求</p></blockquote><ol><li><p>案例：使用枚举定义函数参数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> <span class="token keyword">enum</span> EDirection <span class="token punctuation">{</span>
  Up<span class="token punctuation">,</span>
  Down<span class="token punctuation">,</span>
  Left<span class="token punctuation">,</span>
  Right<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// EDirection.Up	// 显示：(enum member) EDirection.Up = 0</span>

<span class="token comment">// 将枚举作为一个参数</span>
<span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span>dir<span class="token operator">:</span> EDirection<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">walk</span><span class="token punctuation">(</span>EDirection<span class="token punctuation">.</span>Left<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>案例：使用对象定义函数参数（需要用<code>as const</code>进行类型断言）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> ODirection <span class="token operator">=</span> <span class="token punctuation">{</span>
  Up<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  Down<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  Left<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  Right<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span>

<span class="token comment">// ODirection.Up	// 显示：(property) Up: 0</span>

<span class="token comment">// 需要这行代码定义类型别名type</span>
<span class="token class-name"><span class="token keyword">type</span></span> Direction <span class="token operator">=</span> <span class="token keyword">typeof</span> ODirection<span class="token punctuation">[</span><span class="token keyword">keyof</span> <span class="token keyword">typeof</span> ODirection<span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span>dir<span class="token operator">:</span> Direction<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">run</span><span class="token punctuation">(</span>ODirection<span class="token punctuation">.</span>Right<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_2-14-其他类型" tabindex="-1"><a class="header-anchor" href="#_2-14-其他类型" aria-hidden="true">#</a> 2.14 其他类型</h3><h4 id="_2-14-1-bignit" tabindex="-1"><a class="header-anchor" href="#_2-14-1-bignit" aria-hidden="true">#</a> 2.14.1 bignit</h4><ol><li><p>表示非常大的整数：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 通过bigint函数创建bigint</span>
<span class="token keyword">const</span> oneHundred<span class="token operator">:</span> bigint <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token comment">// 通过文本语法创建BigInt</span>
<span class="token keyword">const</span> anotherHundred<span class="token operator">:</span> bigint <span class="token operator">=</span> <span class="token number">100n</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="_2-14-2-symbol" tabindex="-1"><a class="header-anchor" href="#_2-14-2-symbol" aria-hidden="true">#</a> 2.14.2 symbol</h4><ol><li><p>作用：通过函数创建全局唯一引用</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> secondName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>firstName<span class="token operator">===</span>secondName<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h2 id="第3章-类型缩小" tabindex="-1"><a class="header-anchor" href="#第3章-类型缩小" aria-hidden="true">#</a> 第3章 类型缩小</h2><h3 id="_3-1-typeof类型守卫" tabindex="-1"><a class="header-anchor" href="#_3-1-typeof类型守卫" aria-hidden="true">#</a> 3.1 typeof类型守卫</h3><ol><li><p><code>typeof</code>可以返回的类型：（不返回<code>null</code>）</p><div class="language-txt ext-txt line-numbers-mode"><pre class="language-txt"><code>&quot;string&quot;, &quot;number&quot;, &quot;bigint&quot;, &quot;boolean&quot;, &quot;symbol&quot;, &quot;undefined&quot;, &quot;object&quot;, &quot;function&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>检查typeof的返回值是一种类型保护：</p><p>1）由于<code>null</code>也属于object，所以TS报错（在JS中，万物皆对象）</p><p>2）这里的写法只把参数strs缩小到了<code>string[] | null</code>，而不仅仅是<code>string[]</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printAll</span><span class="token punctuation">(</span>strs<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> strs <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 报错：Object is possibly &#39;null&#39;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> s <span class="token keyword">of</span> strs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> strs <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-2-真值缩小" tabindex="-1"><a class="header-anchor" href="#_3-2-真值缩小" aria-hidden="true">#</a> 3.2 真值缩小</h3><ol><li><p>在JS中，常用与false等价的值来表示false：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">0n</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>可以在条件、<code>&amp;&amp;</code>、<code>||</code>、if语句、布尔否定(<code>!</code>)等中使用任何表达式</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 这两个结果都返回 true </span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// type: boolean, value: true </span>
<span class="token operator">!</span><span class="token operator">!</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span> <span class="token comment">// type: true, value: true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>案例：防范<code>null</code>或<code>undefined </code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printAll</span><span class="token punctuation">(</span>strs<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> strs <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> s <span class="token keyword">of</span> strs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> strs <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">multiplyAll</span><span class="token punctuation">(</span>
  values<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  factor<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> values
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> values<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x <span class="token operator">*</span> factor
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">multiplyAll</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-3-等值缩小" tabindex="-1"><a class="header-anchor" href="#_3-3-等值缩小" aria-hidden="true">#</a> 3.3 等值缩小</h3><ol><li><p>等值缩小：使用分支语句做 <code>===</code>、<code>!==</code>、<code>==</code>、<code>!=</code> 等值检查，来实现类型缩小</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 检查x和y是否相等时，TS知道他们的类型也必须相等</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    y<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>案例：检查特定的字面量值（而不是变量）也有效</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">printAll</span><span class="token punctuation">(</span>strs<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 以做一个特定的检查来阻止null</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strs <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> strs <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> s <span class="token keyword">of</span> strs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> strs <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用<code>!=null</code>，可以将<code>null</code>和<code>undefined</code>同时排除在外：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Container</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">multiplyValue</span><span class="token punctuation">(</span>container<span class="token operator">:</span> Container<span class="token punctuation">,</span> factor<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 从类型中排除了undefined 和 null</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>container<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    container<span class="token punctuation">.</span>value <span class="token operator">*=</span> factor
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">multiplyValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token function">multiplyValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token function">multiplyValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token comment">// 报错，接口中没有string类型</span>
<span class="token function">multiplyValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#39;5&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-4-in操作符缩小" tabindex="-1"><a class="header-anchor" href="#_3-4-in操作符缩小" aria-hidden="true">#</a> 3.4 in操作符缩小</h3><blockquote><p><code>in</code>：用于确定对象是否具有某个名称的属性</p></blockquote><ol><li><code>&quot;value&quot; in x</code>：&quot;value&quot;是字符串文字，x是联合类型</li></ol><p>1）true分支：需要x具有可选或必需属性的类型的值</p><p>2）false分支：需要具有可选或缺失属性的类型的值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Fish</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">swim</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Bird</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">fly</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Fish <span class="token operator">|</span> Bird<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果具有swim属性，那肯定属于Fish类型</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;swim&quot;</span> <span class="token keyword">in</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> animal<span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 否则属于Brid类型</span>
  <span class="token keyword">return</span> animal<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>可选属性还将存在于缩小的两侧，如Human可以游泳和飞行，应该出现在<code>in</code>检查的两侧</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Fish</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">swim</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Bird</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">fly</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name">Human</span> <span class="token operator">=</span> <span class="token punctuation">{</span> swim<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span> fly<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span>animal<span class="token operator">:</span> Fish <span class="token operator">|</span> Bird <span class="token operator">|</span> Human<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;swim&quot;</span> <span class="token keyword">in</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 属于 Fish | Human 这两种类型之一</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>animal <span class="token keyword">as</span> Fish<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 属于 Bird | Human 这两种类型之一</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>animal <span class="token keyword">as</span> Bird<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-5-instanceof操作符缩小" tabindex="-1"><a class="header-anchor" href="#_3-5-instanceof操作符缩小" aria-hidden="true">#</a> 3.5 instanceof操作符缩小</h3><blockquote><p><code>instanceof</code>：检查一个值是否是另一个值的“实例”，如：<code>x instanceof Foo</code>，检查x的原型链是否含有Foo.prototype</p></blockquote><ol><li><p>instanceof 也是一个类型保护，可以在其分支中实现类型缩小</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">logValue</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Date <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">logValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">logValue</span><span class="token punctuation">(</span><span class="token string">&#39;hello ts&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-6-分配缩小" tabindex="-1"><a class="header-anchor" href="#_3-6-分配缩小" aria-hidden="true">#</a> 3.6 分配缩小</h3><ol><li><p>当为任何变量赋值时，TypeScript会查看赋值的右侧并适当缩小左侧</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 初始声明：let x : string | number （x为这两种类型之一）</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token number">10</span> <span class="token operator">:</span> <span class="token string">&#39;hello world&#39;</span>

<span class="token comment">// 此时x为number类型</span>
x <span class="token operator">=</span> <span class="token number">1</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token comment">// 此时x为string类型</span>
x <span class="token operator">=</span> <span class="token string">&#39;goodbye!&#39;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>

<span class="token comment">// 报错：x不能为boolean类型，因为它不是声明类型的一部分</span>
x <span class="token operator">=</span> <span class="token boolean">true</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-7-控制流分析" tabindex="-1"><a class="header-anchor" href="#_3-7-控制流分析" aria-hidden="true">#</a> 3.7 控制流分析</h3><ol><li><p>控制流分析：基于可达性的代码分析。案例中padding初始类型有两个，但由于有if分支，TS判断如果走上面分支，说明padding肯定为number类型，则下面分支“不可达”，自动判断下面分支的padding类型为string</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">padLeft</span><span class="token punctuation">(</span>padding<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">,</span> input<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> padding <span class="token operator">===</span> <span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里的padding类型为number</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span>padding <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39; &#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> input
  <span class="token punctuation">}</span>
  <span class="token comment">// 这里的padding类型为string</span>
  <span class="token keyword">return</span> padding <span class="token operator">+</span> input
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>当一个变量被分析时，控制流可以一次又一次地分裂和重新合并，该变量可以被观察到在每个点上有不同的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span>

  x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span>
  <span class="token comment">// x类型为boolean</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
  <span class="token comment">// 这个if判断，使x的boolean被剥离</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
    <span class="token comment">// x类型为string</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token comment">// x类型为number</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 返回值x的类型只能是：string | number</span>
  <span class="token keyword">return</span> x
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// x：string | number</span>
x <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>			<span class="token comment">// 不报错，属于string类型</span>
x <span class="token operator">=</span> <span class="token number">100</span>				<span class="token comment">// 不报错，属于number类型</span>
x <span class="token operator">=</span> <span class="token boolean">true</span>			<span class="token comment">// 报错，属于boolean类型</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-8-类型谓词" tabindex="-1"><a class="header-anchor" href="#_3-8-类型谓词" aria-hidden="true">#</a> 3.8 类型谓词</h3><blockquote><p>作用：更直接地控制整个代码中的类型变化</p></blockquote><ol><li><p>语法：<code>parameterName is Type</code>，其中<code>parameterName</code>必须是当前函数签名中的参数名称</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Fish</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">swim</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Bird</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function-variable function">fly</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token comment">// pet is Fish 是类型谓词，返回boolean值</span>
<span class="token keyword">function</span> <span class="token function">isFish</span><span class="token punctuation">(</span>pet<span class="token operator">:</span> Fish <span class="token operator">|</span> Bird<span class="token punctuation">)</span><span class="token operator">:</span> pet <span class="token keyword">is</span> Fish <span class="token punctuation">{</span>
  <span class="token comment">// 如果是Fish，返回true，否则返回false</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>pet <span class="token keyword">as</span> Fish<span class="token punctuation">)</span><span class="token punctuation">.</span>swim <span class="token operator">!==</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>当isFish被调用时，如果原始类型是兼容的，TypeScript将把该变量缩小到该特定类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Fish <span class="token operator">|</span> Bird <span class="token punctuation">{</span>
  <span class="token keyword">let</span> fish<span class="token operator">:</span> Fish <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;sharkey&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">swim</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ......</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> bird<span class="token operator">:</span> Bird <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;sparrow&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fly</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ......</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 始终返回bird</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token operator">?</span> bird <span class="token operator">:</span> fish
<span class="token punctuation">}</span>

<span class="token keyword">let</span> pet <span class="token operator">=</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// bird</span>

<span class="token comment">// 返回false</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFish</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  pet<span class="token punctuation">.</span><span class="token function">swim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  pet<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用类型守卫 isFish 来过滤<code>Fish | Bird</code>的数组，获得Fish的数组</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> zoo<span class="token operator">:</span> <span class="token punctuation">(</span>Fish <span class="token operator">|</span> Bird<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getSmallPet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> underWater1<span class="token operator">:</span> Fish<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> zoo<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isFish<span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">const</span> underWater2<span class="token operator">:</span> Fish<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> zoo<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isFish<span class="token punctuation">)</span> <span class="token keyword">as</span> Fish<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token comment">// 对于更复杂的例子，该谓词可能需要重复使用</span>
<span class="token keyword">const</span> underWater3<span class="token operator">:</span> Fish<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> zoo<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span><span class="token operator">:</span> pet <span class="token keyword">is</span> Fish <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pet<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;frog&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">isFish</span><span class="token punctuation">(</span>pet<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-9-受歧视的unions" tabindex="-1"><a class="header-anchor" href="#_3-9-受歧视的unions" aria-hidden="true">#</a> 3.9 受歧视的unions</h3><blockquote><p>如果想使用联合类型，最好将其定义得较为完整一些，不要留下存在<code>null</code>的隐患</p></blockquote><ol><li><p>问题：定义Shape接口，用于定义圆和方形，计算该形状的面积，但是由于包含可选属性，TS会判断该属性可能未定义</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;circle&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;square&#39;</span>
  radius<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  sideLength<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getArea</span><span class="token punctuation">(</span>shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>shape<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&#39;circle&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 报错：即使已经声明了kind属于&#39;circle&#39;类型，但radius可能未定义</span>
    <span class="token comment">// 解决：可以使用非空断言符!来声明redius不是null或undefined，但这样不利于后期修改</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> shape<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>解决：将圆和方形的接口分开定义，然后使用类型别名将其联合</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;circle&#39;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;square&#39;</span>
  sideLength<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Shape</span> <span class="token operator">=</span> Circle <span class="token operator">|</span> Square

<span class="token comment">// 这样就不会再次报错</span>
<span class="token keyword">function</span> <span class="token function">getArea</span><span class="token punctuation">(</span>shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>shape<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&#39;circle&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> shape<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 也可以用Switch语句实现</span>
<span class="token keyword">function</span> <span class="token function">getArea</span><span class="token punctuation">(</span>shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>shape<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;circle&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> shape<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span>
    <span class="token keyword">case</span> <span class="token string">&#39;square&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> shape<span class="token punctuation">.</span>sideLength <span class="token operator">**</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_3-10-never类型与穷尽性检查" tabindex="-1"><a class="header-anchor" href="#_3-10-never类型与穷尽性检查" aria-hidden="true">#</a> 3.10 never类型与穷尽性检查</h3><ol><li><p><code>never</code>类型：表示不应该存在的状态，never类型可以分配给每个类型，但没有任何类型可以分配给never（除了never本身）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;circle&#39;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Square</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;square&#39;</span>
  sideLength<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Shape</span> <span class="token operator">=</span> Circle <span class="token operator">|</span> Square

<span class="token keyword">function</span> <span class="token function">getArea</span><span class="token punctuation">(</span>shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>shape<span class="token punctuation">.</span>kind<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&#39;circle&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> shape<span class="token punctuation">.</span>radius <span class="token operator">**</span> <span class="token number">2</span>

    <span class="token keyword">case</span> <span class="token string">&#39;square&#39;</span><span class="token operator">:</span>
      <span class="token keyword">return</span> shape<span class="token punctuation">.</span>sideLength <span class="token operator">**</span> <span class="token number">2</span>
    
	<span class="token comment">// 如果传入的shape不属于Circle或Square，那么就可以用never表示，返回传入的参数obj</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">const</span> _exhaustiveCheck<span class="token operator">:</span> <span class="token builtin">never</span> <span class="token operator">=</span> shape
      <span class="token keyword">return</span> _exhaustiveCheck
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">{</span>kind<span class="token operator">:</span> <span class="token string">&#39;triangle&#39;</span><span class="token punctuation">,</span>sideLength<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h2 id="第4章-函数" tabindex="-1"><a class="header-anchor" href="#第4章-函数" aria-hidden="true">#</a> 第4章 函数</h2><h3 id="_4-1-函数类型表达式" tabindex="-1"><a class="header-anchor" href="#_4-1-函数类型表达式" aria-hidden="true">#</a> 4.1 函数类型表达式</h3><blockquote><p>用于描述一个函数，语法类似箭头函数</p></blockquote><ol><li><p><code>(a: string) =&gt; void</code>：意味着有一个参数的函数，名为a，类型为字符串，没有返回值；如果没有指定参数类型，它就隐含为 any 类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code> <span class="token comment">// 可以用一个类型别名来命名一个函数类型</span>
<span class="token keyword">type</span> <span class="token class-name">GreetFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>

<span class="token keyword">function</span> <span class="token function">greeter</span><span class="token punctuation">(</span>fn<span class="token operator">:</span> GreetFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, World&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">printToConsole</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">greeter</span><span class="token punctuation">(</span>printToConsole<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-2-调用签名" tabindex="-1"><a class="header-anchor" href="#_4-2-调用签名" aria-hidden="true">#</a> 4.2 调用签名</h3><ol><li><p>调用签名：由于函数类型表达式中不允许声明属性，可以用调用签名描述可调用的东西（实现和属性相同的效果）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 语法：在参数列表和返回类型之间使用冒号 : 而不是箭头 =&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">DescribableFunction</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  description<span class="token operator">:</span> <span class="token function">string</span>
  <span class="token punctuation">(</span>someArg<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>fn<span class="token operator">:</span> DescribableFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>description <span class="token operator">+</span> <span class="token string">&#39; returned &#39;</span> <span class="token operator">+</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
fn1<span class="token punctuation">.</span>description <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>

<span class="token function">doSomething</span><span class="token punctuation">(</span>fn1<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-3-构造签名" tabindex="-1"><a class="header-anchor" href="#_4-3-构造签名" aria-hidden="true">#</a> 4.3 构造签名</h3><ol><li><p>语法：先定义构造函数，在调用签名前加<code>new</code>关键字，会创建一个新对象</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Ctor</span> <span class="token punctuation">{</span>
  s<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">SomeConstructor</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Ctor
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> SomeConstructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>s<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>有些JS对象（如Date）可以在有new或没有new的情况下被调用，可以在同一类型中任意地结合调用和构造签名</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CallOrConstructor</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">Date</span>
  <span class="token punctuation">(</span>n<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>date<span class="token operator">:</span> CallOrConstructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">date</span><span class="token punctuation">(</span><span class="token string">&#39;2021-12-20&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-4-泛型函数" tabindex="-1"><a class="header-anchor" href="#_4-4-泛型函数" aria-hidden="true">#</a> 4.4 泛型函数</h3><blockquote><p>泛型：把两个或多个具有相同类型的值联系起来</p></blockquote><ul><li><p>作用：描述值之间的对应关系</p><p>1）希望输入的参数和返回值有某种联系，但是不确定类型，可以使用any，但风险很高</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">firstElement</span><span class="token punctuation">(</span>arr<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token function">firstElement</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）使用泛型可以解决这个问题，可以在函数的输入和输出之间建立联系，类型不受限制</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">firstElement</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// s 是 &#39;string&#39; 类型</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token function">firstElement</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// n 是 &#39;number&#39; 类型</span>
<span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token function">firstElement</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// u 是 undefined 类型</span>
<span class="token keyword">const</span> u <span class="token operator">=</span> <span class="token function">firstElement</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_4-4-1-类型推断" tabindex="-1"><a class="header-anchor" href="#_4-4-1-类型推断" aria-hidden="true">#</a> 4.4.1 类型推断</h4><ol><li><p>TypeScript可以推断出输入类型参数的类型（从给定的字符串数组），以及基于函数表达式的返回值（数字）的输出类型参数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">map</span><span class="token generic class-name"><span class="token operator">&lt;</span>Input<span class="token punctuation">,</span> Output<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr<span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function-variable function">func</span><span class="token operator">:</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> Input<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Output<span class="token punctuation">)</span><span class="token operator">:</span> Output<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> parsed <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-4-2-限制条件" tabindex="-1"><a class="header-anchor" href="#_4-4-2-限制条件" aria-hidden="true">#</a> 4.4.2 限制条件</h4><ol><li><p>应用场景：想把两个值联系起来，但只能对某个值的子集进行操作</p></li><li><p>解决：使用一个约束条件来限制一个类型参数可以接受的类型</p><p>1）将Type约束为<code>{length:number}</code>，所以允许访问a和b参数的<code>length</code>属性</p><p>2）如果没有类型约束，就不能访问这些属性，因为这些值可能是一些没有长度属性的其他类型</p><p>3）TS可以自动推断longest的返回类型，返回类型推断也适用于通用函数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 意思是：传入的参数a、b必须具有length属性</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">longest</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type <span class="token keyword">extends</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>a<span class="token operator">:</span> Type<span class="token punctuation">,</span> b<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> b<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> b
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// longerArray 的类型是 &#39;number[]&#39;</span>
<span class="token keyword">const</span> longerArray <span class="token operator">=</span> <span class="token function">longest</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// longerString 是 &#39;alice&#39;|&#39;bob&#39; 的类型</span>
<span class="token keyword">const</span> longerString <span class="token operator">=</span> <span class="token function">longest</span><span class="token punctuation">(</span><span class="token string">&quot;alice&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bob&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 报错：数字没有&#39;长度&#39;属性</span>
<span class="token keyword">const</span> notOk <span class="token operator">=</span> <span class="token function">longest</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用受限制的注意事项：以下案例中函数承诺返回与传入的对象相同的类型，而不仅仅是与约束条件相匹配的一些对象</p><p>1）传入的obj参数是[1, 2, 3]，属于数组类型，那么函数返回值也必须为数组类型</p><p>2）但是根据if判断，返回值为对象<code>{ length: minimum }</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">minimumLength</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type <span class="token keyword">extends</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> Type<span class="token punctuation">,</span> minimum<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> minimum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 报错：不能将类型“{ length: number; }”分配给类型“Type”</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> minimum <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">minimumLength</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-4-3-指定类型参数" tabindex="-1"><a class="header-anchor" href="#_4-4-3-指定类型参数" aria-hidden="true">#</a> 4.4.3 指定类型参数</h4><ol><li><p>TypeScript通常可以推断出通用调用中的预期类型参数，但并非总是如此</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">combine</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr1<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr2<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>问题：用不匹配的数组调用这个函数是一个错误</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 报错：不能将类型&quot;string&quot;分配给类型&quot;number&quot;</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token function">combine</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>解决：手动指定类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token generic-function"><span class="token function">combine</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-4-4-编写函数准则" tabindex="-1"><a class="header-anchor" href="#_4-4-4-编写函数准则" aria-hidden="true">#</a> 4.4.4 编写函数准则</h4><ol><li><p>参数类型下推：使用类型参数本身，而不是对其进行约束</p><p>1）firstElement1是更好的写法，它的推断返回类型是Type</p><p>2）firstElement2的推断返回类型是any，因为TypeScript必须使用约束类型来解析arr[0]表达式，而不是在调用期间&quot;等待&quot;解析该元素</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 推荐</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">firstElement1</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// 不推荐</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">firstElement2</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type <span class="token keyword">extends</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// a: number</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">firstElement1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// b: any </span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">firstElement2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>总是尽可能少地使用类型参数：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 推荐</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">filter1</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arr<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function-variable function">func</span><span class="token operator">:</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 不推荐</span>
<span class="token keyword">function</span> filter2<span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> Func <span class="token keyword">extends</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>
  arr<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  func<span class="token operator">:</span> Func
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>类型参数应出现两次：如果一个类型的参数只出现在一个地方，请重新考虑是否真的需要它</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 不推荐</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">greet</span><span class="token generic class-name"><span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>s<span class="token operator">:</span> Str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, &#39;</span> <span class="token operator">+</span> s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 推荐，简洁版</span>
<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, &#39;</span> <span class="token operator">+</span> s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-5-可选参数" tabindex="-1"><a class="header-anchor" href="#_4-5-可选参数" aria-hidden="true">#</a> 4.5 可选参数</h3><h4 id="_4-5-1-问号标记" tabindex="-1"><a class="header-anchor" href="#_4-5-1-问号标记" aria-hidden="true">#</a> 4.5.1 问号标记</h4><ol><li><p>语法：将参数用 <code>?</code> 标记，x参数实际上将具有<code>number | undefined</code>类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// 无需传递参数</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// 需要传递参数</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">123.45</span><span class="token punctuation">)</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>也可以提供一个参数默认值：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ......</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-5-2-回调函数中的可选参数" tabindex="-1"><a class="header-anchor" href="#_4-5-2-回调函数中的可选参数" aria-hidden="true">#</a> 4.5.2 回调函数中的可选参数</h4><ol><li><p>原则：当为回调写一个函数类型时，永远不要写一个可选参数，除非打算在不传递该参数的情况下调用函数</p></li><li><p>案例：</p><p>1）定义一个模仿数组forEach功能的函数，希望index参数是可选的</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">myForEach</span><span class="token punctuation">(</span>arr<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    <span class="token function">callback</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）当不涉及对index进行操作时，函数可以正常运行</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">myForEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">myForEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3）当涉及对index进行操作时，TS会报错：对象可能是undefined</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token function">myForEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-6-函数重载" tabindex="-1"><a class="header-anchor" href="#_4-6-函数重载" aria-hidden="true">#</a> 4.6 函数重载</h3><blockquote><p>应用场景：函数可以在不同的参数数量和类型中被调用</p></blockquote><ol><li><p>重载签名：指定一个可以以不同方式调用的函数</p></li><li><p>引子：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 重载签名：接受1个参数</span>
<span class="token keyword">function</span> <span class="token function">makeDate</span><span class="token punctuation">(</span>timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Date
<span class="token comment">// 重载签名：接受3个参数</span>
<span class="token keyword">function</span> <span class="token function">makeDate</span><span class="token punctuation">(</span>m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> d<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Date

<span class="token comment">// 实现签名：虽然d和y都是可选的，但要参考重载签名的定义，不能以两个参数被调用，要么传1个、要么传3个参数</span>
<span class="token keyword">function</span> <span class="token function">makeDate</span><span class="token punctuation">(</span>mOrTimestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> d<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Date <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> mOrTimestamp<span class="token punctuation">,</span> d<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>mOrTimestamp<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> d1 <span class="token operator">=</span> <span class="token function">makeDate</span><span class="token punctuation">(</span><span class="token number">12345678</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> d2 <span class="token operator">=</span> <span class="token function">makeDate</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment">// 报错：没有需要2参数的重载，但存在需要1或3参数的重载</span>
<span class="token keyword">const</span> d3 <span class="token operator">=</span> <span class="token function">makeDate</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="_4-6-1-重载签名与实现签名" tabindex="-1"><a class="header-anchor" href="#_4-6-1-重载签名与实现签名" aria-hidden="true">#</a> 4.6.1 重载签名与实现签名</h4><blockquote><p>实现签名的类型编写原则应该兼容所有重载函数的定义，类似于索引签名</p></blockquote><ol><li><p>参数不正确：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 重载签名</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token comment">// 实现签名（参数啥也不写，默认推断为隐式any）</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 报错：不能以零参数调用，必须传入1个参数</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>参数类型不正确：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 重载签名</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

<span class="token comment">// 实现签名</span>
<span class="token comment">// 报错：上面的fn(x: string)提示，此重载签名与实现签名不兼容</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
<span class="token punctuation">}</span>
<span class="token comment">// 解决：有两个或多个签名</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>返回类型不正确：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 重载签名</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span>

<span class="token comment">// 实现签名</span>
<span class="token comment">// 报错：函数实现缺失或未立即出现在声明之后</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;hello&#39;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 解决：对返回值类型进行声明</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;hello&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-6-2-编写重载准则" tabindex="-1"><a class="header-anchor" href="#_4-6-2-编写重载准则" aria-hidden="true">#</a> 4.6.2 编写重载准则</h4><blockquote><p>原则：尽量使用联合类型的参数，而不是重载参数</p></blockquote><ol><li><p>TS只能将【一个】函数调用解析为【一个】重载：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 重载签名</span>
<span class="token keyword">function</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token keyword">function</span> <span class="token function">len</span><span class="token punctuation">(</span>arr<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token comment">// 实现签名</span>
<span class="token keyword">function</span> <span class="token function">len</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>

<span class="token comment">// 正常运行</span>
<span class="token function">len</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 报错：这里传入的参数类型被解析为：&#39;hello&#39; | number[]，是一个联合类型</span>
<span class="token comment">// 这个联合类型不属于string或any[]中任一类型，所以报错</span>
<span class="token function">len</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token string">&#39;hello&#39;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>解决：将参数改造为联合类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 实现签名</span>
<span class="token keyword">function</span> <span class="token function">len</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x<span class="token punctuation">.</span>length
<span class="token punctuation">}</span>

<span class="token function">len</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">len</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token string">&#39;hello&#39;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-6-3-函数内this声明" tabindex="-1"><a class="header-anchor" href="#_4-6-3-函数内this声明" aria-hidden="true">#</a> 4.6.3 函数内This声明</h4><blockquote><p>在TS中，可以给函数传递名为<code>this</code>的参数（JS不能这样做），但不能是箭头函数</p></blockquote><ol><li><p>常规用法：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  admin<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function-variable function">becomeAdmin</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>admin <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
user<span class="token punctuation">.</span><span class="token function">becomeAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>admin<span class="token punctuation">)</span>	<span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>TS特性：可以在函数体中声明 this 的类型，注意不能使用箭头函数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  admin<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">DB</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// 定义名为filterUsers的函数，返回User类型的数组</span>
  <span class="token comment">// 传入名为filter的函数，其中接收this参数，类型为User，返回布尔值</span>
  <span class="token function">filterUsers</span><span class="token punctuation">(</span><span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> User<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> db<span class="token operator">:</span> <span class="token constant">DB</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">filterUsers</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token function-variable function">filter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> user1<span class="token operator">:</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
      admin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> user2<span class="token operator">:</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
      admin<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">[</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 传入filter函数参数</span>
<span class="token keyword">const</span> admins <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">filterUsers</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>admin
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* const admins = db.filterUsers((this: User) =&gt; {
  return this.admin
}) */</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>admins<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-7-处理函数的常用类型" tabindex="-1"><a class="header-anchor" href="#_4-7-处理函数的常用类型" aria-hidden="true">#</a> 4.7 处理函数的常用类型</h3><h4 id="_4-7-1-void" tabindex="-1"><a class="header-anchor" href="#_4-7-1-void" aria-hidden="true">#</a> 4.7.1 void</h4><ol><li><p><code>void</code>：表示没有返回值的函数的返回值。当一个函数没有任何返回语句，或者没有返回任何明确的值时，它都是推断出来的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 推断出的返回类型是void</span>
<span class="token keyword">function</span> <span class="token function">noop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在JavaScript中，一个不返回任何值的函数将隐含地返回<code>undefinded</code>，但是在TS中<code>void</code>与<code>undefined</code>不同</p></li><li><p>使用<code>type</code>来定义返回值为<code>void</code>类型的函数：可以写任意返回值，但是会被忽略（写了也白写）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">voidFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>

<span class="token comment">// 以下三种实现函数的方法，都可以写返回值，但是相当于白写</span>
<span class="token keyword">const</span> f1<span class="token operator">:</span> <span class="token function-variable function">voidFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f2<span class="token operator">:</span> <span class="token function-variable function">voidFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span>

<span class="token keyword">const</span> f3<span class="token operator">:</span> <span class="token function-variable function">voidFunc</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里的返回值类型依然是void，而不是boolean</span>
<span class="token keyword">const</span> v1<span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> v2<span class="token operator">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 报错：返回值类型为void</span>
<span class="token keyword">const</span> v3<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>直接定义函数的返回值为<code>void</code>类型：不可以写返回值，写了会报错</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 以下两种写法提示报错，不能写返回值！</span>
<span class="token keyword">function</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">f5</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正确写法</span>
<span class="token keyword">function</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">f5</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-7-2-object" tabindex="-1"><a class="header-anchor" href="#_4-7-2-object" aria-hidden="true">#</a> 4.7.2 object</h4><blockquote><p><code>object</code>（第一个字母小写）与<code>Object</code>不同，常用小写的<code>object</code></p></blockquote><ol><li>特殊类型<code>object</code>：指任何不是基元的值（string、number、bigint、boolean、symbol、null、undefined）</li><li>与空对象类型<code>{}</code>不同，也与全局类型<code>Object</code>(大写O)不同（一般不会用<code>Object</code>）</li><li>函数类型在TS中被认为是<code>object</code></li></ol><hr><h4 id="_4-7-3-unknown" tabindex="-1"><a class="header-anchor" href="#_4-7-3-unknown" aria-hidden="true">#</a> 4.7.3 unknown</h4><ol><li><p><code>unknown</code>：代表任何值。与any类型类似，但更安全，对unknown值做任何事情都是不合法的</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 正确</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 错误：对象类型为unknown</span>
<span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可以描述接受任何值的函数，而不需要在函数体中有any值，也可以描述一个返回未知类型的值的函数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">safeParse</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 需要小心对待&#39;obj&#39;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">safeParse</span><span class="token punctuation">(</span><span class="token string">&#39;someRandomString&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-7-4-never" tabindex="-1"><a class="header-anchor" href="#_4-7-4-never" aria-hidden="true">#</a> 4.7.4 never</h4><ol><li><p><code>never</code>：表示永远不会被观察到的值。在一个返回类型中，这意味着函数抛出一个异常或终止程序的执行</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fail</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">never</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>never也出现在TypeScript确定一个union中没有任何东西的时候</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    x <span class="token comment">// &#39;never&#39;类型</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_4-7-5-function" tabindex="-1"><a class="header-anchor" href="#_4-7-5-function" aria-hidden="true">#</a> 4.7.5 Function</h4><ol><li><p>全局性的<code>Function</code>：描述了诸如<code>bind</code>、<code>call</code>、<code>apply</code>和其他存在于JavaScript中所有函数值的属性</p></li><li><p>Function类型的值总是可以被调用，这些调用返回any，但一般不要使用它，因为any不安全</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>f<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如果需要接受一个任意的函数，但不打算调用它，<code>() =&gt; void</code>的类型比较安全</p></li></ol><hr><h3 id="_4-8-参数展开运算符" tabindex="-1"><a class="header-anchor" href="#_4-8-参数展开运算符" aria-hidden="true">#</a> 4.8 参数展开运算符</h3><h4 id="_4-8-1-形参展开-rest-parameters" tabindex="-1"><a class="header-anchor" href="#_4-8-1-形参展开-rest-parameters" aria-hidden="true">#</a> 4.8.1 形参展开(Rest Parameters)</h4><blockquote><p>Rest参数：定义接受无限制数量的参数的函数</p></blockquote><ol><li><p>rest参数出现在所有其他参数之后，使用<code>...</code>的语法</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span>m<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> m<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> x <span class="token operator">=&gt;</span> n <span class="token operator">*</span> x <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>	<span class="token comment">// [10, 20, 30, 40, 600, 1000] </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>这些参数的类型注解是隐含的<code>any[]</code>，而不是any，任何给出的类型注解必须是<code>Array&lt;T&gt;</code>或<code>T[]</code>的形式，或一个元组类型</p></li></ol><hr><h4 id="_4-8-2-实参展开-rest-arguments" tabindex="-1"><a class="header-anchor" href="#_4-8-2-实参展开-rest-arguments" aria-hidden="true">#</a> 4.8.2 实参展开(Rest Arguments)</h4><blockquote><p>spread语法：从数组中提供可变数量的参数</p></blockquote><ol><li><p>案例：数组的push方法需要任意数量的参数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
arr1<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr2<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span>	<span class="token comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>TS会将实参展开的类型自动判断为<code>numbers[]</code>或<code>string[]</code>，但长度不固定</p></li><li><p><code>as const</code>可以解决数组长度不固定的问题，相当于转换为元祖</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token comment">// Math.atan2只能接收2个参数</span>
<span class="token keyword">const</span> angle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">atan2</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_4-9-参数解构" tabindex="-1"><a class="header-anchor" href="#_4-9-参数解构" aria-hidden="true">#</a> 4.9 参数解构</h3><ol><li><p>作用：方便地将作为参数提供的对象，解压到函数主体的一个或多个局部变量中</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> c<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可以使用类型别名，简化代码</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">ABC</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> c<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token constant">ABC</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  c<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>注意：不能只将类型注释放在解构模式中，因为这种语法已经在JS中有不同含义</p><p>1）<code>shape:Shape</code>意味着获取属性shape，并在本地重新定义为一个名为Shape的变量</p><p>2）<code>xPos:number</code>意味着创建一个名为number的变量，其值基于参数的xPos</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Shape <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 报错：Shape：未取消使用任何解构元素。绑定元素“Shape”隐式具有“any”类型。</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token operator">:</span> Shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span>
  <span class="token comment">// 报错：xPos：找不到名称“xPos”</span>
  <span class="token function">render</span><span class="token punctuation">(</span>xPos<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h2 id="第5章-对象类型" tabindex="-1"><a class="header-anchor" href="#第5章-对象类型" aria-hidden="true">#</a> 第5章 对象类型</h2><ol><li><p>匿名对象：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;Hello &#39;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用接口定义对象：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;Hello &#39;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用类型别名定义对象：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token operator">:</span> Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;Hello &#39;</span> <span class="token operator">+</span> person<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-1-属性修改器" tabindex="-1"><a class="header-anchor" href="#_5-1-属性修改器" aria-hidden="true">#</a> 5.1 属性修改器</h3><h4 id="_5-1-1-可选属性" tabindex="-1"><a class="header-anchor" href="#_5-1-1-可选属性" aria-hidden="true">#</a> 5.1.1 可选属性</h4><ol><li><p>语法：在属性名称后加问号<code>?</code>，表示属性可选</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Shape</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PaintOptions</span> <span class="token punctuation">{</span>
  shape<span class="token operator">:</span> Shape<span class="token punctuation">,</span>
  xPos<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  yPos<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> shape<span class="token operator">:</span> Shape <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> yPos<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> yPos<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如果在<code>strictNullChecks</code>开启的模式下，可选属性的类型可能属于undefined</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 问题：可选属性可能为undefined</span>
<span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>xPos
  <span class="token keyword">let</span> yPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>yPos
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xPos<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1）解决方案1：加判断条件</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 加判断条件</span>
<span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>xPos <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> opts<span class="token punctuation">.</span>xPos
  <span class="token keyword">let</span> yPos <span class="token operator">=</span> opts<span class="token punctuation">.</span>yPos <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> opts<span class="token punctuation">.</span>yPos
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xPos<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）解决方法2：设置默认值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">paintShape</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shape<span class="token operator">:</span> Shape<span class="token punctuation">,</span> xPos<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> yPos <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token operator">:</span> PaintOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;x coordinate at&quot;</span><span class="token punctuation">,</span> xPos<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;y coordinate at&quot;</span><span class="token punctuation">,</span> yPos<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_5-1-2-只读属性" tabindex="-1"><a class="header-anchor" href="#_5-1-2-只读属性" aria-hidden="true">#</a> 5.1.2 只读属性</h4><ol><li><p>语法：在属性前加<code>readonly</code>，不能被更改</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SomeType</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> prop<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> SomeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可以读取</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prop<span class="token punctuation">)</span>
  <span class="token comment">// 不能重新设置值</span>
  <span class="token comment">// obj.prop = &#39;hello&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>只读属性只意味着该属性本身不能被重新写入，但是可以巧用其他方法进行修改：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> resident<span class="token operator">:</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">visitForBirthday</span><span class="token punctuation">(</span>home<span class="token operator">:</span> Home<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可以从&#39;home.resident&#39;读取和更新属性</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>home<span class="token punctuation">.</span>resident<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  home<span class="token punctuation">.</span>resident<span class="token punctuation">.</span>age<span class="token operator">++</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">evict</span><span class="token punctuation">(</span>home<span class="token operator">:</span> Home<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 但是不能写到&#39;home&#39;上的&#39;resident&#39;属性本身</span>
  home<span class="token punctuation">.</span>resident <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;Felix&#39;</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>readony属性也可以通过别名来改变：TS在检查两个类型的属性是否兼容时，并不考虑这些类型的属性是否是只读的</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ReadonlyPerson</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> writablePerson<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;Felix&#39;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 正常工作</span>
<span class="token keyword">let</span> readonlyPerson<span class="token operator">:</span> ReadonlyPerson <span class="token operator">=</span> writablePerson

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>readonlyPerson<span class="token punctuation">.</span>age<span class="token punctuation">)</span>	<span class="token comment">//18</span>
writablePerson<span class="token punctuation">.</span>age<span class="token operator">++</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>readonlyPerson<span class="token punctuation">.</span>age<span class="token punctuation">)</span>	<span class="token comment">//19</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_5-1-3-索引签名" tabindex="-1"><a class="header-anchor" href="#_5-1-3-索引签名" aria-hidden="true">#</a> 5.1.3 索引签名</h4><blockquote><p>索引签名的属性类型必须是<code>string</code>或<code>number</code></p></blockquote><ol><li><p>应用场景：不确定对象中有多少属性，但知道属性名和属性值的类型</p></li><li><p>语法：<code>[indexName: string | number] : string | number</code></p><p>1）数字索引器：定义的对象属性为数字类型，可以用数字进行索引，类似于<code>obj[n]</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">StringArray</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> myArray<span class="token operator">:</span> StringArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">// &#39;a&#39;</span>

<span class="token keyword">const</span> myObj<span class="token operator">:</span> StringArray <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span>
  <span class="token number">4</span><span class="token operator">:</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myObj<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">// &#39;world&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）字符串索引器：定义的对象属性为字符串类型，可以用字符串进行索引，类似于<code>obj[&#39;name&#39;]</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">TestString</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>props<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> testString<span class="token operator">:</span> TestString <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）两者可以相结合使用</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>whatever<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> test<span class="token operator">:</span> Test <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">12</span><span class="token operator">:</span> <span class="token number">156</span><span class="token punctuation">,</span>
  <span class="token number">58</span><span class="token operator">:</span> <span class="token string">&#39;today&#39;</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  hobby<span class="token operator">:</span> <span class="token string">&#39;football&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>从字符串索引器返回的类型必须是数字索引器返回的类型的子类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  breed<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Zoo</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> Animal<span class="token punctuation">,</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> Dog<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这样写会报错</span>
<span class="token comment">// interface Zoo {</span>
<span class="token comment">//   [index: string]: Dog,</span>
<span class="token comment">//   [index: number]: Animal,</span>
<span class="token comment">// }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>索引签名下方，可以继续定义其他属性的类型，但需要注意不能和索引签名冲突</p><p>1）正常：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> test<span class="token operator">:</span> Test <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  z<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  length<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&#39;felix&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）报错：由于索引签名已经定义了属性名为string的情况，其属性值类型为number，而name也属于这种情况，但属性值为string，发生冲突</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">NotOkay</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">number</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">// 报错：冲突：name对应的属性值类型应该为number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>只读索引签名：添加<code>readonly</code>，防止通过其索引赋值</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ReadonlyStringArray</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token punctuation">[</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myArray2<span class="token operator">:</span> ReadonlyStringArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span>
<span class="token comment">// 报错：无法赋值</span>
myArray2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;felix&#39;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-2-扩展类型" tabindex="-1"><a class="header-anchor" href="#_5-2-扩展类型" aria-hidden="true">#</a> 5.2 扩展类型</h3><blockquote><p>扩展类型的本质：<code>interface extends</code></p></blockquote><ol><li><p>在已有接口的基础上拓展：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">BasicAddress</span> <span class="token punctuation">{</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  street<span class="token operator">:</span> <span class="token builtin">string</span>
  city<span class="token operator">:</span> <span class="token builtin">string</span>
  country<span class="token operator">:</span> <span class="token builtin">string</span>
  postalCode<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">AddressWithUnit</span> <span class="token keyword">extends</span> <span class="token class-name">BasicAddress</span> <span class="token punctuation">{</span>
  unit<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> awu<span class="token operator">:</span> AddressWithUnit <span class="token operator">=</span> <span class="token punctuation">{</span>
  unit<span class="token operator">:</span> <span class="token string">&#39;3单元&#39;</span><span class="token punctuation">,</span>
  street<span class="token operator">:</span> <span class="token string">&#39;清河街道&#39;</span><span class="token punctuation">,</span>
  city<span class="token operator">:</span> <span class="token string">&#39;北京&#39;</span><span class="token punctuation">,</span>
  postalCode<span class="token operator">:</span> <span class="token string">&#39;100000&#39;</span><span class="token punctuation">,</span>
  country<span class="token operator">:</span> <span class="token string">&#39;中国&#39;</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>扩展多个接口：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Colorful</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">ColorCircle</span> <span class="token keyword">extends</span> <span class="token class-name">Colorful</span><span class="token punctuation">,</span> Circle <span class="token punctuation">{</span>
    <span class="token comment">// ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> cc<span class="token operator">:</span> ColorCircle <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-3-交叉类型" tabindex="-1"><a class="header-anchor" href="#_5-3-交叉类型" aria-hidden="true">#</a> 5.3 交叉类型</h3><blockquote><p>交叉类型的本质：重名interface会自动添加新字段，重名type不会添加新字段，要用<code>&amp;</code>来合并不同接口添加新字段</p></blockquote><ol><li><p>命名定义type：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Colorful</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token comment">// 命名定义</span>
<span class="token keyword">type</span> <span class="token class-name">ColorfulCircle</span> <span class="token operator">=</span> Colorful <span class="token operator">&amp;</span> Circle

<span class="token keyword">const</span> cc<span class="token operator">:</span> ColorfulCircle <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>匿名定义type：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 匿名定义</span>
<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span>circle<span class="token operator">:</span> Colorful <span class="token operator">&amp;</span> Circle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>color<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>radius<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token string">&#39;green&#39;</span><span class="token punctuation">,</span>
  rdaius<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 报错：拼写错误会检查出来</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>重名interface会自动添加新字段：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Sister</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Sister</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> sister1<span class="token operator">:</span> Sister <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;sisterAn&#39;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>重名type不会添加新字段：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Sister</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// 报错：标识符“Sister”重复</span>
<span class="token keyword">type</span> <span class="token class-name">Sister</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-4-泛型对象类型" tabindex="-1"><a class="header-anchor" href="#_5-4-泛型对象类型" aria-hidden="true">#</a> 5.4 泛型对象类型</h3><ol><li><p>引子：想定义一个通用的接口，可以自由传入不同类型的值</p><p>1）使用any：虽然也可以实现，但是风险很高</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// any会带来很大风险，不推荐</span>
<span class="token keyword">interface</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> box<span class="token operator">:</span> Box <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）使用unknown：需要做预防性检查或类型断言，很麻烦</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// unknown如果处理需要提前做判断，很麻烦</span>
<span class="token keyword">interface</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">unknown</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x<span class="token operator">:</span> Box <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x<span class="token punctuation">.</span>contents <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>contents<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>contents <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>解决：使用泛型，可以自由在外侧定义内部类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 使用泛型</span>
<span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type
<span class="token punctuation">}</span>
<span class="token comment">// 普通接口</span>
<span class="token keyword">interface</span> <span class="token class-name">StringBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 泛型：可以随意定义contents的类型</span>
<span class="token keyword">let</span> boxA<span class="token operator">:</span> Box<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
<span class="token comment">// 普通接口：contents只能是number类型</span>
<span class="token keyword">let</span> boxB<span class="token operator">:</span> StringBox <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>理解：Type是一个占位符，会被替换成其他类型，泛型接口可以重复使用，而无需重新建立</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Apple</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">AppleBox</span> <span class="token operator">=</span> Box<span class="token operator">&lt;</span>Apple<span class="token operator">&gt;</span> <span class="token comment">// 等价于 &#39;{ contents: Apple }&#39;</span>
<span class="token keyword">let</span> ab<span class="token operator">:</span> AppleBox <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> a<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>函数重载中的应用：可以大幅简化代码，无需函数重载便可实现功能</p><p>1）普通函数重载：定义一个通用函数，可以传入number或string或boolean类型的值，这样写非常麻烦</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 重载签名</span>
<span class="token keyword">interface</span> <span class="token class-name">NumberBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">StringBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">BooleanBox</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> StringBox<span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> NumberBox<span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> BooleanBox<span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>

<span class="token comment">// 实现签名</span>
<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> <span class="token punctuation">{</span> contents<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> newContents<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  box<span class="token punctuation">.</span>contents <span class="token operator">=</span> newContents
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）使用泛型：直接定义泛型接口，一步到位实现通用函数</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setContents</span><span class="token punctuation">(</span>box<span class="token operator">:</span> Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">,</span> newContents<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  box<span class="token punctuation">.</span>contents <span class="token operator">=</span> newContents
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>类型别名<code>type</code>中的应用：</p><p>1）基本用法：与定义泛型接口一样</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  contents<span class="token operator">:</span> Type
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）与接口的区别：不仅可以描述对象类型，还可以用它来编写其他类型的通用辅助类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">OrNull<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token operator">|</span> <span class="token keyword">null</span>
<span class="token keyword">type</span> <span class="token class-name">OneOrMany<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token operator">|</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">type</span> <span class="token class-name">OneOrManyOrNull<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> OrNull<span class="token operator">&lt;</span>OneOrMany<span class="token operator">&lt;</span>Type<span class="token operator">&gt;&gt;</span>
<span class="token keyword">type</span> <span class="token class-name">OneOrManyOrNullString</span> <span class="token operator">=</span> OneOrManyOrNull<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-5-数组类型" tabindex="-1"><a class="header-anchor" href="#_5-5-数组类型" aria-hidden="true">#</a> 5.5 数组类型</h3><ol><li><p>语法：<code>number[]</code>、<code>string[]</code>、<code>Array&lt;numebr&gt;</code>、<code>Arrray&lt;string&gt;</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myArray<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">]</span>

<span class="token function">doSomething</span><span class="token punctuation">(</span>myArray<span class="token punctuation">)</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Array</code>本身也是一个通用类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 数组的本质也是个接口，Array也可以改成其他名字</span>
<span class="token keyword">interface</span> <span class="token class-name"><span class="token builtin">Array</span><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  lenght<span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token operator">|</span> <span class="token keyword">undefined</span>
  <span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>item<span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>拓展：其他通用的数据结构</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code> Map<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> Set<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-6-只读数组类型" tabindex="-1"><a class="header-anchor" href="#_5-6-只读数组类型" aria-hidden="true">#</a> 5.6 只读数组类型</h3><ol><li><p><code>ReadonlyArray&lt;Type&gt;</code>：特殊的类型，描述了不应该被改变的数组</p><p>1）普通语法：<code>ReadonlyArray&lt;Type&gt;</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>values<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> copy <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// 报错：类型“readonly string[]”上不存在属性“push”</span>
  values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）速记语法：<code>readonly type[]</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>values<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> copy <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// 报错：类型“readonly string[]”上不存在属性“push”</span>
  values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>与<code>Array</code>的区别：</p><p>1）不可以使用<code>new</code>来创建只读数组</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 报错：“ReadonlyArray”仅表示类型，但在此处却作为值使用</span>
<span class="token keyword">new</span> <span class="token class-name">ReadonlyArray</span><span class="token punctuation">(</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;green&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;blue&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2）可以将普通的<code>Array</code>分配给<code>ReadonlyArray</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> roArray<span class="token operator">:</span> ReadonlyArray<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;green&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;blue&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3）仅可以将只读数组赋值给普通数组，而不能反向操作</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

x <span class="token operator">=</span> y
<span class="token comment">// 报错：类型 &quot;readonly string[]&quot; 为 &quot;readonly&quot;，不能分配给可变类型 &quot;string[]</span>
y <span class="token operator">=</span> x
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-7-元祖类型-tuple" tabindex="-1"><a class="header-anchor" href="#_5-7-元祖类型-tuple" aria-hidden="true">#</a> 5.7 元祖类型 tuple</h3><ol><li><p>定义：元祖就是长度和类型都固定的数组</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 参数pair就属于元祖类型，要求里面只能有2个元素，且第一个必须是string，第二个必须是number</span>
<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>pair<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> a <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> b <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> c <span class="token operator">=</span> pair<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>	<span class="token comment">// 报错：引用了超出元祖长度的元素</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>元祖解构：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>stringHash<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>inputString<span class="token punctuation">,</span> hash<span class="token punctuation">]</span> <span class="token operator">=</span> stringHash
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>利用接口定义元祖：必须要用<code>length</code>属性固定长度，并定义可以操作元祖的方法</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">StringNumberPair</span> <span class="token punctuation">{</span>
  <span class="token comment">// 专有属性：定义固定长度</span>
  length<span class="token operator">:</span> <span class="token number">3</span>
  <span class="token comment">// 为索引声明属性</span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token comment">// 定义slice方法，返回数组</span>
  <span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> end<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>a<span class="token operator">:</span> StringNumberPair<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">// 8</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//[8,100]</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可选元素：在元素类型后添加<code>?</code>，只能出现在末尾，会影响<code>length</code>属性</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Either2dOr3d</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token operator">?</span><span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">setCoordinate</span><span class="token punctuation">(</span>coord<span class="token operator">:</span> Either2dOr3d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> coord
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>coord<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">setCoordinate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>		<span class="token comment">// 2</span>
<span class="token function">setCoordinate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>其余元素：元祖可以有其余元素（长度不受限制），这些元素必须是<code>array</code>或<code>tuple</code>类型的</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 前两个元素分别是字符串和数字，后面可以有任意数量的布尔值</span>
<span class="token keyword">type</span> <span class="token class-name">StringNumberBooleans</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment">// 第一个元素是字符串，然后是任意数量的布尔值，最后是一个数字</span>
<span class="token keyword">type</span> <span class="token class-name">StringBooleansNumber</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>
<span class="token comment">// 第一个元素是布尔值，然后是一个字符串，最后是一个数字</span>
<span class="token keyword">type</span> <span class="token class-name">BooleansStringNumber</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> a<span class="token operator">:</span> StringNumberBooleans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> b<span class="token operator">:</span> StringNumberBooleans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;beautiful&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> c<span class="token operator">:</span> StringNumberBooleans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可选元素、其余元素存在的意义：允许TS将tuples与函数的参数列表相对应</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">readButtonInput</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> version<span class="token punctuation">,</span> <span class="token operator">...</span>input<span class="token punctuation">]</span> <span class="token operator">=</span> args
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>version<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">readButtonInput</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token number">10.5</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_5-8-只读元祖类型" tabindex="-1"><a class="header-anchor" href="#_5-8-只读元祖类型" aria-hidden="true">#</a> 5.8 只读元祖类型</h3><ol><li><p>语法：在元祖前添加<code>readonly</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>pair<span class="token operator">:</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 报错：无法分配到 &quot;0&quot; ，因为它是只读属性</span>
  pair<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>带有<code>const</code>断言的数组：被推断为只读元组类型</p><p>1）问题：虽然distanceFromOrigin没有修改元祖元素，但是期望一个可变的元组。由于point的类型被推断为只读的[3,4]，它与[number,number]不兼容，因为该类型不能保证point的元素不被修改</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>	<span class="token comment">// 这里point被定义为只读元祖</span>

<span class="token keyword">function</span> <span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> y <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 报错：类型 &quot;readonly [3, 4]&quot; 为 &quot;readonly&quot;，不能分配给可变类型 &quot;[number, number]&quot;</span>
<span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）解决：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> point<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> y <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">distanceFromOrigin</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h2 id="第6章-类型操纵" tabindex="-1"><a class="header-anchor" href="#第6章-类型操纵" aria-hidden="true">#</a> 第6章 类型操纵</h2><blockquote><p>泛型类型、keyof、typeof、索引访问类型、条件类型、映射类型、模板字面量类型</p></blockquote><h3 id="_6-1-泛型" tabindex="-1"><a class="header-anchor" href="#_6-1-泛型" aria-hidden="true">#</a> 6.1 泛型</h3><h4 id="_6-1-1-泛型基本用法" tabindex="-1"><a class="header-anchor" href="#_6-1-1-泛型基本用法" aria-hidden="true">#</a> 6.1.1 泛型基本用法</h4><ol><li><p>泛型可以定义通用函数：如可以使函数的输入和输出内容类型保持一致</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>调用泛型函数：</p><p>1）方法1：手动指定类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2）方法2：TS自动推断类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token function">loggingIdentity</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>注意：如果在函数体内对参数进行了一些操作，需要注意泛型的定义是否兼容</p><p>1）如果想在函数内访问arg的length属性，TS报错</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span>	<span class="token comment">// Type上不存在属性length</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）需要将Type改造成具有length属性的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）也可以使用泛型约束</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type <span class="token keyword">extends</span> <span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">.</span>length<span class="token punctuation">)</span> 
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-1-2-泛型类型" tabindex="-1"><a class="header-anchor" href="#_6-1-2-泛型类型" aria-hidden="true">#</a> 6.1.2 泛型类型</h4><ol><li><p>语法：</p><p>1）方法1：普通用法</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
<span class="token keyword">let</span> myIdentity<span class="token operator">:</span> <span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Type <span class="token operator">=</span> identity
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）方法2：泛型名称可以自定义</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> myIdentity<span class="token operator">:</span> <span class="token operator">&lt;</span>Input<span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Input<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Input <span class="token operator">=</span> identity
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3）方法3：写成对象字面类型的调用签名</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> myIdentity<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">}</span> <span class="token operator">=</span> identity
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4）方法4：写成接口</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">GenericIdentityFn</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type
<span class="token punctuation">}</span>
<span class="token keyword">let</span> myIdentity<span class="token operator">:</span> GenericIdentityFn <span class="token operator">=</span> identity

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>对接口的改造：需要在外面定义类型，这样更加严谨</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">GenericIdentityFn<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type
<span class="token punctuation">}</span>
<span class="token keyword">let</span> myIdentity<span class="token operator">:</span> GenericIdentityFn<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> identity
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-1-3-泛型类" tabindex="-1"><a class="header-anchor" href="#_6-1-3-泛型类" aria-hidden="true">#</a> 6.1.3 泛型类</h4><ol><li><p>tsconfig设置：由于会在类中声明未被定义的Type，所以调整设置使TS不报错</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token string-property property">&quot;strictPropertyInitialization&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>语法：在类名后加<code>&lt;Type&gt;</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span>NumType<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  zeroValue<span class="token operator">:</span> NumType
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> NumType<span class="token punctuation">,</span> y<span class="token operator">:</span> NumType<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> NumType
<span class="token punctuation">}</span>

<span class="token comment">// NumType为number类型</span>
<span class="token keyword">let</span> myGeneric <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myGeneric<span class="token punctuation">.</span>zeroValue <span class="token operator">=</span> <span class="token number">0</span>
myGeneric<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token comment">// NumType为string类型</span>
<span class="token keyword">let</span> myGeneric <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GenericNumber<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
myGeneric<span class="token punctuation">.</span>zeroValue <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
myGeneric<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-1-4-泛型约束-extends" tabindex="-1"><a class="header-anchor" href="#_6-1-4-泛型约束-extends" aria-hidden="true">#</a> 6.1.4 泛型约束 extends</h4><ol><li><p>语法：在<code>Type</code>后使用<code>extends</code>关键字</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Lengthwise</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">loggingIdentity</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type <span class="token keyword">extends</span> Lengthwise<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> Type<span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  arg<span class="token punctuation">.</span>length
  <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>

<span class="token function">loggingIdentity</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;world&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在泛型约束中使用类型参数<code>keyof</code>：防止获取不存于与obj上的属性</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">getProperty</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token punctuation">,</span> Key <span class="token keyword">extends</span> <span class="token keyword">keyof</span> Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> Type<span class="token punctuation">,</span> key<span class="token operator">:</span> Key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> d<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">}</span>

<span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span>
<span class="token function">getProperty</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">&#39;m&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 报错：m不在x的键值中</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-1-4-泛型中使用类类型" tabindex="-1"><a class="header-anchor" href="#_6-1-4-泛型中使用类类型" aria-hidden="true">#</a> 6.1.4 泛型中使用类类型</h4><ol><li><p>复习：创建工厂</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// JS实现：写一个函数，输入对象后，可以返回其实例</span>
<span class="token keyword">function</span> <span class="token function">creatInstance</span><span class="token punctuation">(</span><span class="token parameter">MyClassName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1）函数的构造签名</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Ctor</span> <span class="token punctuation">{</span>
  s<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 写法1：</span>
<span class="token keyword">type</span> <span class="token class-name">SomeConstructor</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Ctor
<span class="token punctuation">}</span>
<span class="token comment">// 写法2：</span>
<span class="token keyword">type</span> <span class="token class-name">SomeConstructor</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Ctor

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> SomeConstructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>s<span class="token punctuation">)</span>	<span class="token comment">// &#39;hello&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）将上述案例抽象化，提取骨干部分</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Ctor</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 写法1：</span>
<span class="token keyword">type</span> <span class="token class-name">someCtor</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Ctor
<span class="token punctuation">}</span>
<span class="token comment">// 写法2：</span>
<span class="token keyword">type</span> <span class="token class-name">SomeConstructor</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Ctor

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> someCtor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）进一步简写上述代码</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Ctor</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Ctor <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在TS中使用泛型创建工厂时，有必要通过其构造函数来引用类的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">create</span><span class="token generic class-name"><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>c<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> Type <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>案例：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">BeeKeeper</span> <span class="token punctuation">{</span>
  hasMask<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ZooKeeper</span> <span class="token punctuation">{</span>
  nametag<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#39;Mikle&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  numLegs<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">4</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Bee</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  keeper<span class="token operator">:</span> BeeKeeper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeeKeeper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 类类型</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Lion</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  keeper<span class="token operator">:</span> ZooKeeper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeper</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// 类类型</span>
<span class="token punctuation">}</span>
<span class="token comment">// 翻译：根据输入的类创建实例，但是输入的类必须具备Animal的属性</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createInstance</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> Animal<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>c<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">A</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">createInstance</span><span class="token punctuation">(</span>Lion<span class="token punctuation">)</span><span class="token punctuation">.</span>keeper<span class="token punctuation">.</span>nametag
<span class="token function">createInstance</span><span class="token punctuation">(</span>Bee<span class="token punctuation">)</span><span class="token punctuation">.</span>keeper<span class="token punctuation">.</span>hasMask
<span class="token comment">// 报错：类型 &quot;BeeKeeper&quot; 中缺少属性 &quot;numLegs&quot;，但类型 &quot;Animal&quot; 中需要该属性</span>
<span class="token function">createInstance</span><span class="token punctuation">(</span>BeeKeeper<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_6-2-keyof类型操作符" tabindex="-1"><a class="header-anchor" href="#_6-2-keyof类型操作符" aria-hidden="true">#</a> 6.2 keyof类型操作符</h3><ol><li><p><code>keyof</code>运算符接收一个对象类型，并产生其key的字符串或数字联合类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Point	<span class="token comment">// 相当于 type P = &quot;x&quot; | &quot;y&quot;</span>

<span class="token keyword">const</span> p1<span class="token operator">:</span> <span class="token constant">P</span> <span class="token operator">=</span> <span class="token string">&#39;x&#39;</span>
<span class="token keyword">const</span> p2<span class="token operator">:</span> <span class="token constant">P</span> <span class="token operator">=</span> <span class="token string">&#39;y&#39;</span>
<span class="token comment">// 报错：不能将类型&quot;z&quot;分配给类型keyof Point</span>
<span class="token keyword">const</span> p3<span class="token operator">:</span> <span class="token constant">P</span> <span class="token operator">=</span> <span class="token string">&#39;z&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>对于索引签名：</p><p>1）数字型索引签名：相当于<code>number</code>类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Arrayish</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">unknown</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Arrayish	<span class="token comment">// 相当于 type A = number</span>
<span class="token keyword">const</span> a<span class="token operator">:</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）字符串索引签名：相当于<code>number | string</code>联合类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Mapish</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>k<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">M</span></span> <span class="token operator">=</span> <span class="token keyword">keyof</span> Mapish	<span class="token comment">// 相当于 type M = number | string</span>

<span class="token keyword">const</span> m1<span class="token operator">:</span> <span class="token constant">M</span> <span class="token operator">=</span> <span class="token string">&#39;s&#39;</span>
<span class="token keyword">const</span> m2<span class="token operator">:</span> <span class="token constant">M</span> <span class="token operator">=</span> <span class="token number">100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_6-3-typeof类型操作符" tabindex="-1"><a class="header-anchor" href="#_6-3-typeof类型操作符" aria-hidden="true">#</a> 6.3 typeof类型操作符</h3><ol><li><p><code>typeof</code>操作符：可以在类型上下文中使用它，来引用一个变量或属性的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token keyword">let</span> n<span class="token operator">:</span> <span class="token keyword">typeof</span> s	<span class="token comment">// string类型</span>
n <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
n <span class="token operator">=</span> <span class="token number">100</span>	<span class="token comment">// 报错：不能将类型“number”分配给类型“string”</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>应用：内置类型<code>RetrunType&lt;T&gt;</code>，接收一个函数类型并产生其返回类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Predicate</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">K</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span>Predicate<span class="token operator">&gt;</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    y<span class="token operator">:</span> <span class="token number">3</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">P</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> f<span class="token operator">&gt;</span> 	<span class="token comment">// 返回类型：{x:number; y:number}</span>
<span class="token keyword">const</span> p<span class="token operator">:</span> <span class="token constant">P</span> <span class="token operator">=</span> <span class="token number">100</span>  				<span class="token comment">// 报错，与{x:number; y:number}不兼容</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>注意：不要将typeof用于判断函数返回值的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">msgbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>					  <span class="token comment">// 类型：()=&gt;void</span>
<span class="token keyword">let</span> shouldContinue<span class="token operator">:</span> <span class="token keyword">typeof</span> <span class="token function">msgbox</span><span class="token punctuation">(</span><span class="token string">&#39;100&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 报错：不要将typeof用于判断函数返回值的类型</span>
<span class="token keyword">let</span> shouldContinue<span class="token operator">:</span> <span class="token keyword">typeof</span> msgbox         <span class="token comment">// 这样用可以，代表shouldContinue是函数类型：()=&gt;void</span>
shouldContinue <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment">// 报错：不能将类型“number”分配给类型“() =&gt; void”</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_6-4-索引访问类型" tabindex="-1"><a class="header-anchor" href="#_6-4-索引访问类型" aria-hidden="true">#</a> 6.4 索引访问类型</h3><ol><li><p>索引type类型中的属性，来获取类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  alive<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span> <span class="token comment">// number类型</span>
<span class="token keyword">let</span> age<span class="token operator">:</span> Age <span class="token operator">=</span> <span class="token string">&#39;90&#39;</span> <span class="token comment">// 报错：不属于number类型</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>索引interface中的属性，来获取类型：</p><p>1）常规用法：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  alive<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token comment">// 相当于：type I1 = string | number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I1</span></span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> i11<span class="token operator">:</span> <span class="token constant">I1</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">const</span> i12<span class="token operator">:</span> <span class="token constant">I1</span> <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token comment">// const i13: I1 = true // 报错</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）与keyof配合：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 相当于：type I2 = string | number | boolean</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I2</span></span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token keyword">keyof</span> Person<span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token constant">I21</span><span class="token operator">:</span> <span class="token constant">I2</span> <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token keyword">const</span> <span class="token constant">I22</span><span class="token operator">:</span> <span class="token constant">I2</span> <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">const</span> <span class="token constant">I23</span><span class="token operator">:</span> <span class="token constant">I2</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token comment">// const I24: I2 = {} // 报错</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3）与type配合：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 相当于：type I3 = boolean | string</span>
<span class="token keyword">type</span> <span class="token class-name">AliveOrName</span> <span class="token operator">=</span> <span class="token string">&#39;alive&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;name&#39;</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I3</span></span> <span class="token operator">=</span> Person<span class="token punctuation">[</span>AliveOrName<span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token constant">I31</span><span class="token operator">:</span> <span class="token constant">I3</span> <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">const</span> <span class="token constant">I32</span><span class="token operator">:</span> <span class="token constant">I3</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token comment">// const I33: I3 = 100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）索引不存在的属性会报错：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">I4</span></span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">&#39;alve&#39;</span><span class="token punctuation">]</span> <span class="token comment">// 报错：索引不存在的属性</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>与typeof结合，从数组中获取类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 如果不定义MyArray的类型，TS会自动推断 MyArray:{name:string,age:number}</span>
<span class="token keyword">const</span> MyArray <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Alice&#39;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Bob&#39;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Eve&#39;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">38</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// 相当于：type Person = { name: string, age: number }</span>
<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> MyArray<span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token comment">// 数值型索引签名，等价于：typeof MyArray[0]、MyArray[1]、MyArray[2]</span>
<span class="token keyword">const</span> p<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;xiaoqian&#39;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
  <span class="token comment">// alive: true</span>
<span class="token punctuation">}</span>

<span class="token comment">// 等价于：type Age = number</span>
<span class="token keyword">type</span> <span class="token class-name">Age</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> MyArray<span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> age<span class="token operator">:</span> Age <span class="token operator">=</span> <span class="token number">11</span>

<span class="token comment">// 等价于：type Age2 = number</span>
<span class="token keyword">type</span> <span class="token class-name">Age2</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> age2<span class="token operator">:</span> Age2 <span class="token operator">=</span> <span class="token number">300</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如果想用索引访问类型，不能用const将key定义为值，而只能用type将key定义为类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 如果想用索引访问类型，不能用const将key定义为值，而只能用type将key定义为类型</span>
<span class="token comment">// const key = &#39;age&#39;	// 报错</span>
<span class="token keyword">type</span> <span class="token class-name">key</span> <span class="token operator">=</span> <span class="token string">&#39;age&#39;</span>
<span class="token keyword">type</span> <span class="token class-name">Age3</span> <span class="token operator">=</span> Person<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_6-5-条件类型" tabindex="-1"><a class="header-anchor" href="#_6-5-条件类型" aria-hidden="true">#</a> 6.5 条件类型</h3><blockquote><p>语法：<code>SomeType extends OtherType ? TrueType : FalseType</code></p></blockquote><ol><li><p>条件类型可以辅助判断某类型是否是另一个类型的子类：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">live</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token function">woof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token comment">// type Example1 = number</span>
<span class="token keyword">type</span> <span class="token class-name">Example1</span> <span class="token operator">=</span> Dog <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token operator">?</span> <span class="token builtin">number</span> <span class="token operator">:</span> <span class="token builtin">string</span>

<span class="token comment">// type Example2 = string</span>
<span class="token keyword">type</span> <span class="token class-name">Example2</span> <span class="token operator">=</span> RegExp <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token operator">?</span> <span class="token builtin">number</span> <span class="token operator">:</span> <span class="token builtin">string</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>条件类型可以简化函数重载，使代码更简洁：</p><p>1）方法1：函数重载</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">IdLabel</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">NameLabel</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createLabel</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> IdLabel
<span class="token keyword">function</span> <span class="token function">createLabel</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> NameLabel
<span class="token keyword">function</span> <span class="token function">createLabel</span><span class="token punctuation">(</span>nameOrId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> IdLabel <span class="token operator">|</span> NameLabel
<span class="token keyword">function</span> <span class="token function">createLabel</span><span class="token punctuation">(</span>nameOrId<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> IdLabel <span class="token operator">|</span> NameLabel <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）方法2：条件类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">NameOrId<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">number</span></span> <span class="token operator">?</span> IdLabel <span class="token operator">:</span> NameLabel

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createLabel</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>idOrName<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> NameOrId<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token string">&#39;&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">// type a = NameLabel</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">createLabel</span><span class="token punctuation">(</span><span class="token string">&#39;typescript&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// type b = IdLabel</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">createLabel</span><span class="token punctuation">(</span><span class="token number">2.8</span><span class="token punctuation">)</span>

<span class="token comment">// type c = NameLabel | IdLabel</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token function">createLabel</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token string">&#39;hello&#39;</span> <span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-5-1-条件类型约束" tabindex="-1"><a class="header-anchor" href="#_6-5-1-条件类型约束" aria-hidden="true">#</a> 6.5.1 条件类型约束</h4><ol><li><p>作用：可以进一步约束泛型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 报错：类型“&quot;message&quot;”无法用于索引类型“T”</span>
<span class="token comment">// type MessageOf&lt;T&gt; = T[&#39;message&#39;]</span>

<span class="token comment">// 对上述代码进行改造后，可以使用了</span>
<span class="token comment">// type MessageOf&lt;T extends { message: unknown }&gt; = T[&#39;message&#39;]</span>

<span class="token comment">// 进一步改造：如果没有message属性，则为never类型</span>
<span class="token keyword">type</span> <span class="token class-name">MessageOf<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token builtin">unknown</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span> 

<span class="token keyword">interface</span> <span class="token class-name">Email</span> <span class="token punctuation">{</span>
  message<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token comment">// 相当于：type EmailMessageContents = string</span>
<span class="token keyword">type</span> <span class="token class-name">EmailMessageContents</span> <span class="token operator">=</span> MessageOf<span class="token operator">&lt;</span>Email<span class="token operator">&gt;</span>
<span class="token keyword">const</span> emc<span class="token operator">:</span> EmailMessageContents <span class="token operator">=</span> <span class="token string">&#39;balabala...&#39;</span>

<span class="token comment">// 相当于：type DogMessageContents = never</span>
<span class="token keyword">type</span> <span class="token class-name">DogMessageContents</span> <span class="token operator">=</span> MessageOf<span class="token operator">&lt;</span>Dog<span class="token operator">&gt;</span>
<span class="token keyword">const</span> dmc<span class="token operator">:</span> DogMessageContents <span class="token operator">=</span> <span class="token string">&#39;error&#39;</span> <span class="token keyword">as</span> <span class="token builtin">never</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>案例：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Flatten<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token constant">T</span>

<span class="token comment">// 相当于：type Str = string</span>
<span class="token keyword">type</span> <span class="token class-name">Str</span> <span class="token operator">=</span> Flatten<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// 相当于：type Num = number</span>
<span class="token keyword">type</span> <span class="token class-name">Num</span> <span class="token operator">=</span> Flatten<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-5-2-条件类型推理-infer" tabindex="-1"><a class="header-anchor" href="#_6-5-2-条件类型推理-infer" aria-hidden="true">#</a> 6.5.2 条件类型推理 infer</h4><ol><li><p>infer关键字：推断在真实分支中进行对比的类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">GetReturnType<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">never</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">infer</span> Return <span class="token operator">?</span> Return <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token comment">// 相当于：type Num = number</span>
<span class="token keyword">type</span> <span class="token class-name">Num</span> <span class="token operator">=</span> GetReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
<span class="token keyword">let</span> num<span class="token operator">:</span> Num <span class="token operator">=</span> <span class="token number">100</span>

<span class="token comment">// 相当于：type Str = string</span>
<span class="token keyword">type</span> <span class="token class-name">Str</span> <span class="token operator">=</span> GetReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token keyword">let</span> str<span class="token operator">:</span> Str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>

<span class="token comment">// 相当于：type Bools = boolean[]</span>
<span class="token keyword">type</span> <span class="token class-name">Bools</span> <span class="token operator">=</span> GetReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
<span class="token keyword">let</span> bools<span class="token operator">:</span> Bools <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span>

<span class="token comment">// 相当于：type Never = never</span>
<span class="token keyword">type</span> <span class="token class-name">Never</span> <span class="token operator">=</span> GetReturnType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span>
<span class="token keyword">let</span> nev<span class="token operator">:</span> Never <span class="token operator">=</span> <span class="token string">&#39;error&#39;</span> <span class="token keyword">as</span> <span class="token builtin">never</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>当从一个具有多个调用签名的类型（如重载函数）进行推断时，从最后一个签名进行推断</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">stringOrNum</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token keyword">function</span> <span class="token function">stringOrNum</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token keyword">function</span> <span class="token function">stringOrNum</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span>
<span class="token keyword">function</span> <span class="token function">stringOrNum</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token string">&#39;hello&#39;</span> <span class="token operator">:</span> <span class="token number">23</span>
<span class="token punctuation">}</span>

<span class="token comment">// 相当于：type T1 = string | number</span>
<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">T1</span></span> <span class="token operator">=</span> ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> stringOrNum<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-5-3-分布式条件类型" tabindex="-1"><a class="header-anchor" href="#_6-5-3-分布式条件类型" aria-hidden="true">#</a> 6.5.3 分布式条件类型</h4><ol><li><p>定义：条件类型作用于一个通用类型，当给定一个联合类型时，它们就变成了分布式的</p><p>1）分解步骤1：看到<code>StrArrOrNumArr</code>后面传入了<code>string | number</code>类型</p><p>2）分解步骤2：<code>ToArray</code>会将其变成<code>ToArray&lt;string&gt; | ToArray&lt;number&gt;</code></p><p>3）分解步骤3：根ToArray定义，最终的类型是<code>string[] | number[]</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ToArray<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> Type <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span> <span class="token operator">?</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span>

<span class="token comment">// 相当于：type StrArrOrNumArr = string[] | number[]</span>
<span class="token keyword">type</span> <span class="token class-name">StrArrOrNumArr</span> <span class="token operator">=</span> ToArray<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
<span class="token keyword">let</span> test1<span class="token operator">:</span> StrArrOrNumArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> test2<span class="token operator">:</span> StrArrOrNumArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">123</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如果不想让联合类型变成分布式的，可以在extends后面给类型加<code>[...]</code></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">ToArrayNonDist<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span>Type<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token builtin">any</span><span class="token punctuation">]</span> <span class="token operator">?</span> Type<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">never</span>
<span class="token comment">// 相当于：type StrArrOrNumArr = (string | number)[]</span>
<span class="token keyword">type</span> <span class="token class-name">StrArrOrNumArr</span> <span class="token operator">=</span> ToArrayNonDist<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token operator">&gt;</span>
<span class="token keyword">let</span> saon<span class="token operator">:</span> StrArrOrNumArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h3 id="_6-6-映射类型" tabindex="-1"><a class="header-anchor" href="#_6-6-映射类型" aria-hidden="true">#</a> 6.6 映射类型</h3><ol><li><p>复习：映射类型建立在索引签名的语法上，索引签名用于声明没有被提前声明的属性类型</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">OnlyBoolsAndHorses</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> Horse
<span class="token punctuation">}</span>
<span class="token keyword">const</span> conforms<span class="token operator">:</span> OnlyBoolsAndHorses <span class="token operator">=</span> <span class="token punctuation">{</span>
  del<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  rodney<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>映射类型：若不想重复定义类型，一个类型可以以另一个类型为基础创建新类型，与使用<code>keyof</code>创建的<code>PropertyKeys</code>搭配使用</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// OptionsFlags将从Type类型中获取所有属性，并将它们的值改为布尔值</span>
<span class="token keyword">type</span> <span class="token class-name">OptionsFlags<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Property <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FeatureFlags</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">darkMode</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  <span class="token function-variable function">newUserProfile</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>

<span class="token comment">// 以下两种写法是相同效果的</span>
<span class="token keyword">type</span> <span class="token class-name">FeatureOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  darkMode<span class="token operator">:</span> <span class="token builtin">boolean</span>
  newUserProfile<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FeatureOptions</span> <span class="token operator">=</span> OptionsFlags<span class="token operator">&lt;</span>FeatureFlags<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-6-1-映射修改器" tabindex="-1"><a class="header-anchor" href="#_6-6-1-映射修改器" aria-hidden="true">#</a> 6.6.1 映射修改器</h4><ol><li><p>修饰符：<code>readonly</code>、<code>?</code>，通过用<code>-</code>或<code>+</code>作为前缀来删除或添加这些修饰语，如果不加前缀默认是<code>+</code></p></li><li><p>案例：</p><p>1）从一个类型的属性中删除 &quot;readonly&quot;属性</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">CreateMutable<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 从一个类型的属性中删除 &quot;readonly&quot;属性</span>
  <span class="token operator">-</span><span class="token keyword">readonly</span> <span class="token punctuation">[</span>Property <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Property<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LockedAccount</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UnlockedAccount</span> <span class="token operator">=</span> CreateMutable<span class="token operator">&lt;</span>LockedAccount<span class="token operator">&gt;</span>

<span class="token comment">// 相当于：</span>
<span class="token keyword">type</span> <span class="token class-name">UnlockedAccount</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2）从一个类型的属性中删除 &quot;可选&quot; 属性</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Concrete<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Property <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Property<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">MaybeUser</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> Concrete<span class="token operator">&lt;</span>MaybeUser<span class="token operator">&gt;</span>

<span class="token comment">// 相当于：</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr><h4 id="_6-6-2-属性重映射" tabindex="-1"><a class="header-anchor" href="#_6-6-2-属性重映射" aria-hidden="true">#</a> 6.6.2 属性重映射</h4><ol><li><p>语法：可以通过映射类型中的<code>as</code>子句重新映射映射类型中的键（适用于v4.1版本后）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">MappedTypeWithNewProperties<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Properties <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type <span class="token keyword">as</span> NewKeyType<span class="token punctuation">]</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Properties<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>利用模板字符串，从先前的属性名称中创建新的属性名称：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">Getters<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Property <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type <span class="token keyword">as</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">get</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Capitalize<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">&amp;</span> Property<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Type<span class="token punctuation">[</span>Property<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span>
  location<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LazyPerson</span> <span class="token operator">=</span> Getters<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span>

<span class="token comment">// 相当于：</span>
<span class="token keyword">type</span> <span class="token class-name">LazyPerson</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getName</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span>
  <span class="token function-variable function">getAge</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span>
  <span class="token function-variable function">getLocation</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>通过<code>Exclude&lt;Type, ExcludedUnion&gt;</code>删除不需要的属性：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 删除 &quot;kind&quot;属性</span>
<span class="token keyword">type</span> <span class="token class-name">RemoveKindField<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Property <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type <span class="token keyword">as</span> Exclude<span class="token operator">&lt;</span>Property<span class="token punctuation">,</span> <span class="token string">&#39;kind&#39;</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Property<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;circle&#39;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">KindlessCircle</span> <span class="token operator">=</span> RemoveKindField<span class="token operator">&lt;</span>Circle<span class="token operator">&gt;</span>

<span class="token comment">// 相当于：</span>
<span class="token keyword">type</span> <span class="token class-name">KindlessCircle</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>可以映射任意的联合类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">EventConfig<span class="token operator">&lt;</span>Events <span class="token keyword">extends</span> <span class="token punctuation">{</span> kind<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">E</span> <span class="token keyword">in</span> Events <span class="token keyword">as</span> <span class="token constant">E</span><span class="token punctuation">[</span><span class="token string">&#39;kind&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token constant">E</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">type</span> <span class="token class-name">SquareEvent</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;square&#39;</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">CircleEvent</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">&#39;circle&#39;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Config</span> <span class="token operator">=</span> EventConfig<span class="token operator">&lt;</span>SquareEvent <span class="token operator">|</span> CircleEvent<span class="token operator">&gt;</span>

<span class="token comment">// 相当于：</span>
<span class="token keyword">type</span> <span class="token class-name">Config</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">square</span><span class="token operator">:</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> SquareEvent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  <span class="token function-variable function">circle</span><span class="token operator">:</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> CircleEvent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用条件类型的映射类型：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 案例：根据一个对象的属性pii是否被设置为字面意义上的true，返回true或false</span>
<span class="token keyword">type</span> <span class="token class-name">ExtractPII<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>Property <span class="token keyword">in</span> <span class="token keyword">keyof</span> Type<span class="token punctuation">]</span><span class="token operator">:</span> Type<span class="token punctuation">[</span>Property<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> pii<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">DBFields</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token punctuation">{</span> format<span class="token operator">:</span> <span class="token string">&#39;incrementing&#39;</span> <span class="token punctuation">}</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> pii<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectsNeedingGDPRDeletion</span> <span class="token operator">=</span> ExtractPII<span class="token operator">&lt;</span>DBFields<span class="token operator">&gt;</span>

<span class="token comment">// 相当于：</span>
<span class="token keyword">type</span> <span class="token class-name">ObjectsNeedingGDPRDeletion</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> <span class="token boolean">false</span>
  name<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><hr></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: dr_neutron@126.com">Jason Zhou</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/WebNotebook/base/ts.html" class="" aria-label="TypeScript"><!--[--><!--]--> TypeScript <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/WebNotebook/assets/app.a696b835.js" defer></script>
  </body>
</html>
